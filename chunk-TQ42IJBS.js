import{$ as fn,B as gr,C as us,D as hs,E as m,F as Be,G as ps,H as fs,I as bs,J as gs,K as di,L as _s,M as _r,N as vs,O as Nt,P as ui,Q as j,R as ys,S as ws,T as Ot,U as he,V as vr,W as pn,X as Cs,Y as Is,Z as hi,_ as xs,aa as ze,ba as Ss,ca as Ts,da as Rs,ea as Es,f as ns,fa as ks,ga as Ds,h as pt,ia as As,j as is,ja as bn,k as Ne,ka as Ps,l as rs,la as Ms,m as Oe,ma as Ns,n as os,na as Os,oa as Ls,pa as mi,q as as,qa as Fs,r as ss,ra as js,t as cs,u as ls,v as ds,va as Bs,w as Le,x as Fe}from"./chunk-MEKZBHAK.js";import{c as ms,d as si,f as je,g as ci,h as li}from"./chunk-XAZLOLJU.js";import{d as Xt,e as br,f as ai}from"./chunk-ALCRIWZS.js";import{$ as tt,$a as p,$b as Ka,A as Ji,Aa as ce,Ab as mr,B as ct,Bb as J,C as Ma,Ca as Va,Cb as ht,D as tr,Da as F,Db as mt,Ea as Z,Eb as Pe,F as re,G as Na,Ga as V,Gb as Ct,H as ti,Ha as $a,Hb as Vt,I as lt,Ib as Zt,J as er,Jb as Mt,K as Re,Kb as Me,L as hn,Lb as It,M as Oa,Ma as le,Mb as q,N as nr,Nb as G,O as Ee,P as La,Qb as pr,R as ei,Rb as Qa,S as Kt,Sb as Ya,T as ir,U as Fa,V as ja,X as rr,Y as Ba,Ya as Wa,Yb as ue,Z as oe,Zb as xt,_ as ot,_a as wt,a as _,aa as H,ab as sr,ac as Za,b as it,ba as K,bb as zt,da as za,db as oi,ea as O,ec as Xa,fa as ae,fb as Ha,fc as Ja,g as Da,ga as Ua,gb as At,gc as ts,h as jt,ha as N,hc as es,i as Aa,ia as or,ic as fr,j as ie,ja as Dt,k as Ki,ka as g,kc as $t,l as Zi,la as ke,lb as dt,m as M,mb as ut,n as rt,na as yt,nb as qa,nc as P,oa as se,ob as Ga,oc as mn,pa as B,pb as Ae,q as kt,qa as ni,rb as cr,sa as ii,sb as Pt,ta as Bt,tb as Ut,u as vt,ub as lr,v,va as De,vb as X,w as un,wa as z,wb as de,x as Xi,xa as U,xb as dr,y as Pa,ya as ri,yb as ur,z as E,za as ar,zb as hr}from"./chunk-GYFONJW2.js";var y="primary",Mn=Symbol("RouteTitle"),xr=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qe(e){return new xr(e)}function Ed(e,n,t){let i=t.path.split("/");if(i.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],s=e[o];if(a[0]===":")r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function kd(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Lt(e[t],n[t]))return!1;return!0}function Lt(e,n){let t=e?Sr(e):void 0,i=n?Sr(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!Gs(e[r],n[r]))return!1;return!0}function Sr(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Gs(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),i=[...n].sort();return t.every((r,o)=>i[o]===r)}else return e===n}function Qs(e){return e.length>0?e[e.length-1]:null}function te(e){return Xi(e)?e:Ja(e)?vt(Promise.resolve(e)):v(e)}var Dd={exact:Ks,subset:Zs},Ys={exact:Ad,subset:Pd,ignored:()=>!0};function zs(e,n,t){return Dd[t.paths](e.root,n.root,t.matrixParams)&&Ys[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function Ad(e,n){return Lt(e,n)}function Ks(e,n,t){if(!pe(e.segments,n.segments)||!bi(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!e.children[i]||!Ks(e.children[i],n.children[i],t))return!1;return!0}function Pd(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>Gs(e[t],n[t]))}function Zs(e,n,t){return Xs(e,n,n.segments,t)}function Xs(e,n,t,i){if(e.segments.length>t.length){let r=e.segments.slice(0,t.length);return!(!pe(r,t)||n.hasChildren()||!bi(r,t,i))}else if(e.segments.length===t.length){if(!pe(e.segments,t)||!bi(e.segments,t,i))return!1;for(let r in n.children)if(!e.children[r]||!Zs(e.children[r],n.children[r],i))return!1;return!0}else{let r=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!pe(e.segments,r)||!bi(e.segments,r,i)||!e.children[y]?!1:Xs(e.children[y],n,o,i)}}function bi(e,n,t){return n.every((i,r)=>Ys[t](e[r].parameters,i.parameters))}var Ht=class{constructor(n=new x([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qe(this.queryParams),this._queryParamMap}toString(){return Od.serialize(this)}},x=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gi(this)}},me=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=qe(this.parameters),this._parameterMap}toString(){return tc(this)}};function Md(e,n){return pe(e,n)&&e.every((t,i)=>Lt(t.parameters,n[i].parameters))}function pe(e,n){return e.length!==n.length?!1:e.every((t,i)=>t.path===n[i].path)}function Nd(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===y&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==y&&(t=t.concat(n(r,i)))}),t}var Zr=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:()=>new In,providedIn:"root"})}}return e})(),In=class{parse(n){let t=new Rr(n);return new Ht(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${gn(n.root,!0)}`,i=jd(n.queryParams),r=typeof n.fragment=="string"?`#${Ld(n.fragment)}`:"";return`${t}${i}${r}`}},Od=new In;function gi(e){return e.segments.map(n=>tc(n)).join("/")}function gn(e,n){if(!e.hasChildren())return gi(e);if(n){let t=e.children[y]?gn(e.children[y],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==y&&i.push(`${r}:${gn(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Nd(e,(i,r)=>r===y?[gn(e.children[y],!1)]:[`${r}:${gn(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[y]!=null?`${gi(e)}/${t[0]}`:`${gi(e)}/(${t.join("//")})`}}function Js(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pi(e){return Js(e).replace(/%3B/gi,";")}function Ld(e){return encodeURI(e)}function Tr(e){return Js(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _i(e){return decodeURIComponent(e)}function Us(e){return _i(e.replace(/\+/g,"%20"))}function tc(e){return`${Tr(e.path)}${Fd(e.parameters)}`}function Fd(e){return Object.entries(e).map(([n,t])=>`;${Tr(n)}=${Tr(t)}`).join("")}function jd(e){let n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(r=>`${pi(t)}=${pi(r)}`).join("&"):`${pi(t)}=${pi(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var Bd=/^[^\/()?;#]+/;function yr(e){let n=e.match(Bd);return n?n[0]:""}var zd=/^[^\/()?;=#]+/;function Ud(e){let n=e.match(zd);return n?n[0]:""}var Vd=/^[^=?&#]+/;function $d(e){let n=e.match(Vd);return n?n[0]:""}var Wd=/^[^&#]+/;function Hd(e){let n=e.match(Wd);return n?n[0]:""}var Rr=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new x([],{}):new x([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[y]=new x(n,t)),i}parseSegment(){let n=yr(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(n),new me(_i(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=Ud(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=yr(this.remaining);r&&(i=r,this.capture(i))}n[_i(t)]=_i(i)}parseQueryParam(n){let t=$d(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Hd(this.remaining);a&&(i=a,this.capture(i))}let r=Us(t),o=Us(i);if(n.hasOwnProperty(r)){let a=n[r];Array.isArray(a)||(a=[a],n[r]=a),a.push(o)}else n[r]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=yr(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new K(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=y);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[y]:new x([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new K(4011,!1)}};function ec(e){return e.segments.length>0?new x([],{[y]:e}):e}function nc(e){let n={};for(let[i,r]of Object.entries(e.children)){let o=nc(r);if(i===y&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))n[a]=s;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let t=new x(e.segments,n);return qd(t)}function qd(e){if(e.numberOfChildren===1&&e.children[y]){let n=e.children[y];return new x(e.segments.concat(n.segments),n.children)}return e}function fe(e){return e instanceof Ht}function Gd(e,n,t=null,i=null){let r=ic(e);return rc(r,n,t,i)}function ic(e){let n;function t(o){let a={};for(let c of o.children){let l=t(c);a[c.outlet]=l}let s=new x(o.url,a);return o===e&&(n=s),s}let i=t(e.root),r=ec(i);return n??r}function rc(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(n.length===0)return wr(r,r,r,t,i);let o=Qd(n);if(o.toRoot())return wr(r,r,new x([],{}),t,i);let a=Yd(o,r,e),s=a.processChildren?yn(a.segmentGroup,a.index,o.commands):ac(a.segmentGroup,a.index,o.commands);return wr(r,a.segmentGroup,s,t,i)}function vi(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function xn(e){return typeof e=="object"&&e!=null&&e.outlets}function wr(e,n,t,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let a;e===n?a=t:a=oc(e,n,t);let s=ec(nc(a));return new Ht(s,o,r)}function oc(e,n,t){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===n?i[r]=t:i[r]=oc(o,n,t)}),new x(e.segments,i)}var yi=class{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&vi(i[0]))throw new K(4003,!1);let r=i.find(xn);if(r&&r!==Qs(i))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Qd(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new yi(!0,0,e);let n=0,t=!1,i=e.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?t=!0:s===".."?n++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new yi(t,n,i)}var $e=class{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}};function Yd(e,n,t){if(e.isAbsolute)return new $e(n,!0,0);if(!t)return new $e(n,!1,NaN);if(t.parent===null)return new $e(t,!0,0);let i=vi(e.commands[0])?0:1,r=t.segments.length-1+i;return Kd(t,r,e.numberOfDoubleDots)}function Kd(e,n,t){let i=e,r=n,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new K(4005,!1);r=i.segments.length}return new $e(i,!1,r-o)}function Zd(e){return xn(e[0])?e[0].outlets:{[y]:e}}function ac(e,n,t){if(e??=new x([],{}),e.segments.length===0&&e.hasChildren())return yn(e,n,t);let i=Xd(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new x(e.segments.slice(0,i.pathIndex),{});return o.children[y]=new x(e.segments.slice(i.pathIndex),e.children),yn(o,0,r)}else return i.match&&r.length===0?new x(e.segments,{}):i.match&&!e.hasChildren()?Er(e,n,t):i.match?yn(e,0,r):Er(e,n,t)}function yn(e,n,t){if(t.length===0)return new x(e.segments,{});{let i=Zd(t),r={};if(Object.keys(i).some(o=>o!==y)&&e.children[y]&&e.numberOfChildren===1&&e.children[y].segments.length===0){let o=yn(e.children[y],n,t);return new x(e.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=ac(e.children[o],n,a))}),Object.entries(e.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new x(e.segments,r)}}function Xd(e,n,t){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return o;let a=e.segments[r],s=t[i];if(xn(s))break;let c=`${s}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$s(c,l,a))return o;i+=2}else{if(!$s(c,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Er(e,n,t){let i=e.segments.slice(0,n),r=0;for(;r<t.length;){let o=t[r];if(xn(o)){let c=Jd(o.outlets);return new x(i,c)}if(r===0&&vi(t[0])){let c=e.segments[n];i.push(new me(c.path,Vs(t[0]))),r++;continue}let a=xn(o)?o.outlets[y]:`${o}`,s=r<t.length-1?t[r+1]:null;a&&s&&vi(s)?(i.push(new me(a,Vs(s))),r+=2):(i.push(new me(a,{})),r++)}return new x(i,{})}function Jd(e){let n={};return Object.entries(e).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[t]=Er(new x([],{}),0,i))}),n}function Vs(e){let n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function $s(e,n,t){return e==t.path&&Lt(n,t.parameters)}var wn="imperative",$=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}($||{}),ft=class{constructor(n,t){this.id=n,this.url=t}},Sn=class extends ft{constructor(n,t,i="imperative",r=null){super(n,t),this.type=$.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jt=class extends ft{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=$.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},st=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(st||{}),kr=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(kr||{}),Wt=class extends ft{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=$.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},be=class extends ft{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=$.NavigationSkipped}},Tn=class extends ft{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=$.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wi=class extends ft{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=$.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dr=class extends ft{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=$.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ar=class extends ft{constructor(n,t,i,r,o){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=$.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pr=class extends ft{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=$.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mr=class extends ft{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=$.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nr=class{constructor(n){this.route=n,this.type=$.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Or=class{constructor(n){this.route=n,this.type=$.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Lr=class{constructor(n){this.snapshot=n,this.type=$.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fr=class{constructor(n){this.snapshot=n,this.type=$.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jr=class{constructor(n){this.snapshot=n,this.type=$.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Br=class{constructor(n){this.snapshot=n,this.type=$.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Rn=class{},Ge=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function tu(e,n){return e.providers&&!e._injector&&(e._injector=Ga(e.providers,n,`Route: ${e.path}`)),e._injector??n}function St(e){return e.outlet||y}function eu(e,n){let t=e.filter(i=>St(i)===n);return t.push(...e.filter(i=>St(i)!==n)),t}function Nn(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zr=class{get injector(){return Nn(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Ei(this.rootInjector),this.attachRef=null}},Ei=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new zr(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||e)(Dt(ii))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ci=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=Ur(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){let t=Ur(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=Vr(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return Vr(n,this._root).map(t=>t.value)}};function Ur(e,n){if(e===n.value)return n;for(let t of n.children){let i=Ur(e,t);if(i)return i}return null}function Vr(e,n){if(e===n.value)return[n];for(let t of n.children){let i=Vr(e,t);if(i.length)return i.unshift(n),i}return[]}var at=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ve(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var Ii=class extends Ci{constructor(n,t){super(n),this.snapshot=t,Xr(this,n)}toString(){return this.snapshot.toString()}};function sc(e){let n=nu(e),t=new rt([new me("",{})]),i=new rt({}),r=new rt({}),o=new rt({}),a=new rt(""),s=new ge(t,i,o,a,r,y,e,n.root);return s.snapshot=n.root,new Ii(new at(s,[]),n)}function nu(e){let n={},t={},i={},r="",o=new We([],n,i,r,t,y,e,null,{});return new Si("",new at(o,[]))}var ge=class{constructor(n,t,i,r,o,a,s,c){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(E(l=>l[Mn]))??v(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(E(n=>qe(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(E(n=>qe(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xi(e,n,t="emptyOnly"){let i,{routeConfig:r}=e;return n!==null&&(t==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:_(_({},n.params),e.params),data:_(_({},n.data),e.data),resolve:_(_(_(_({},e.data),n.data),r?.data),e._resolvedData)}:i={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},r&&lc(r)&&(i.resolve[Mn]=r.title),i}var We=class{get title(){return this.data?.[Mn]}constructor(n,t,i,r,o,a,s,c,l){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qe(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qe(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Si=class extends Ci{constructor(n,t){super(t),this.url=n,Xr(this,t)}toString(){return cc(this._root)}};function Xr(e,n){n.value._routerState=e,n.children.forEach(t=>Xr(e,t))}function cc(e){let n=e.children.length>0?` { ${e.children.map(cc).join(", ")} } `:"";return`${e.value}${n}`}function Cr(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Lt(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Lt(n.params,t.params)||e.paramsSubject.next(t.params),kd(n.url,t.url)||e.urlSubject.next(t.url),Lt(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function $r(e,n){let t=Lt(e.params,n.params)&&Md(e.url,n.url),i=!e.parent!=!n.parent;return t&&!i&&(!e.parent||$r(e.parent,n.parent))}function lc(e){return typeof e.title=="string"||e.title===null}var iu=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=y,this.activateEvents=new F,this.deactivateEvents=new F,this.attachEvents=new F,this.detachEvents=new F,this.parentContexts=g(Ei),this.location=g(At),this.changeDetector=g($t),this.inputBinder=g(Jr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=t;let r=this.location,a=t.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new Wr(t,s,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=B({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[De]})}}return e})(),Wr=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===ge?this.route:n===Ei?this.childContexts:this.parent.get(n,t)}},Jr=new N("");function ru(e,n,t){let i=En(e,n._root,t?t._root:void 0);return new Ii(i,n)}function En(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=n.value;let r=ou(e,n,t);return new at(i,r)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(s=>En(e,s)),a}}let i=au(n.value),r=n.children.map(o=>En(e,o));return new at(i,r)}}function ou(e,n,t){return n.children.map(i=>{for(let r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return En(e,i,r);return En(e,i)})}function au(e){return new ge(new rt(e.url),new rt(e.params),new rt(e.queryParams),new rt(e.fragment),new rt(e.data),e.outlet,e.component,e)}var kn=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},dc="ngNavigationCancelingError";function Ti(e,n){let{redirectTo:t,navigationBehaviorOptions:i}=fe(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=uc(!1,st.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function uc(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[dc]=!0,t.cancellationCode=n,t}function su(e){return hc(e)&&fe(e.url)}function hc(e){return!!e&&e[dc]}var cu=(e,n,t,i)=>E(r=>(new Hr(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)),Hr=class{constructor(n,t,i,r,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),Cr(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){let r=Ve(t);n.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=Ve(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:s})}}deactivateRouteAndOutlet(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=Ve(n);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){let r=Ve(t);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Br(o.value.snapshot))}),n.children.length&&this.forwardEvent(new Fr(n.value.snapshot))}activateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(Cr(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Cr(s.route.value),this.activateChildRoutes(n,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(n,null,a.children)}else this.activateChildRoutes(n,null,i)}},Ri=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},He=class{constructor(n,t){this.component=n,this.route=t}};function lu(e,n,t){let i=e._root,r=n?n._root:null;return _n(i,r,t,[i.value])}function du(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Ye(e,n){let t=Symbol(),i=n.get(e,t);return i===t?typeof e=="function"&&!Ua(e)?e:n.get(e):i}function _n(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ve(n);return e.children.forEach(a=>{uu(a,o[a.value.outlet],t,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Cn(s,t.getContext(a),r)),r}function uu(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,a=n?n.value:null,s=t?t.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let c=hu(a,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ri(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?_n(e,n,s?s.children:null,i,r):_n(e,n,t,i,r),c&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new He(s.outlet.component,a))}else a&&Cn(n,s,r),r.canActivateChecks.push(new Ri(i)),o.component?_n(e,null,s?s.children:null,i,r):_n(e,null,t,i,r);return r}function hu(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!pe(e.url,n.url);case"pathParamsOrQueryParamsChange":return!pe(e.url,n.url)||!Lt(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$r(e,n)||!Lt(e.queryParams,n.queryParams);case"paramsChange":default:return!$r(e,n)}}function Cn(e,n,t){let i=Ve(e),r=e.value;Object.entries(i).forEach(([o,a])=>{r.component?n?Cn(a,n.children.getContext(o),t):Cn(a,null,t):Cn(a,n,t)}),r.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new He(n.outlet.component,r)):t.canDeactivateChecks.push(new He(null,r)):t.canDeactivateChecks.push(new He(null,r))}function On(e){return typeof e=="function"}function mu(e){return typeof e=="boolean"}function pu(e){return e&&On(e.canLoad)}function fu(e){return e&&On(e.canActivate)}function bu(e){return e&&On(e.canActivateChild)}function gu(e){return e&&On(e.canDeactivate)}function _u(e){return e&&On(e.canMatch)}function mc(e){return e instanceof Pa||e?.name==="EmptyError"}var fi=Symbol("INITIAL_VALUE");function Qe(){return ot(e=>Ji(e.map(n=>n.pipe(Ee(1),oe(fi)))).pipe(E(n=>{for(let t of n)if(t!==!0){if(t===fi)return fi;if(t===!1||vu(t))return t}return!0}),lt(n=>n!==fi),Ee(1)))}function vu(e){return fe(e)||e instanceof kn}function yu(e,n){return ct(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?v(it(_({},t),{guardsResult:!0})):wu(a,i,r,e).pipe(ct(s=>s&&mu(s)?Cu(i,o,e,n):v(s)),E(s=>it(_({},t),{guardsResult:s})))})}function wu(e,n,t,i){return vt(e).pipe(ct(r=>Ru(r.component,r.route,t,n,i)),Kt(r=>r!==!0,!0))}function Cu(e,n,t,i){return vt(n).pipe(hn(r=>Ma(xu(r.route.parent,i),Iu(r.route,i),Tu(e,r.path,t),Su(e,r.route,t))),Kt(r=>r!==!0,!0))}function Iu(e,n){return e!==null&&n&&n(new jr(e)),v(!0)}function xu(e,n){return e!==null&&n&&n(new Lr(e)),v(!0)}function Su(e,n,t){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return v(!0);let r=i.map(o=>tr(()=>{let a=Nn(n)??t,s=Ye(o,a),c=fu(s)?s.canActivate(n,e):Bt(a,()=>s(n,e));return te(c).pipe(Kt())}));return v(r).pipe(Qe())}function Tu(e,n,t){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(a=>du(a)).filter(a=>a!==null).map(a=>tr(()=>{let s=a.guards.map(c=>{let l=Nn(a.node)??t,d=Ye(c,l),u=bu(d)?d.canActivateChild(i,e):Bt(l,()=>d(i,e));return te(u).pipe(Kt())});return v(s).pipe(Qe())}));return v(o).pipe(Qe())}function Ru(e,n,t,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return v(!0);let a=o.map(s=>{let c=Nn(n)??r,l=Ye(s,c),d=gu(l)?l.canDeactivate(e,n,t,i):Bt(c,()=>l(e,n,t,i));return te(d).pipe(Kt())});return v(a).pipe(Qe())}function Eu(e,n,t,i){let r=n.canLoad;if(r===void 0||r.length===0)return v(!0);let o=r.map(a=>{let s=Ye(a,e),c=pu(s)?s.canLoad(n,t):Bt(e,()=>s(n,t));return te(c)});return v(o).pipe(Qe(),pc(i))}function pc(e){return Aa(H(n=>{if(typeof n!="boolean")throw Ti(e,n)}),E(n=>n===!0))}function ku(e,n,t,i){let r=n.canMatch;if(!r||r.length===0)return v(!0);let o=r.map(a=>{let s=Ye(a,e),c=_u(s)?s.canMatch(n,t):Bt(e,()=>s(n,t));return te(c)});return v(o).pipe(Qe(),pc(i))}var Dn=class{constructor(n){this.segmentGroup=n||null}},An=class extends Error{constructor(n){super(),this.urlTree=n}};function Ue(e){return un(new Dn(e))}function Du(e){return un(new K(4e3,!1))}function Au(e){return un(uc(!1,st.GuardRejected))}var qr=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return v(i);if(r.numberOfChildren>1||!r.children[y])return Du(`${n.redirectTo}`);r=r.children[y]}}applyRedirectCommands(n,t,i,r,o){if(typeof t!="string"){let s=t,{queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,params:b,data:f,title:T}=r,D=Bt(o,()=>s({params:b,data:f,queryParams:c,fragment:l,routeConfig:d,url:u,outlet:h,title:T}));if(D instanceof Ht)throw new An(D);t=D}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if(t[0]==="/")throw new An(a);return a}applyRedirectCreateUrlTree(n,t,i,r){let o=this.createSegmentGroup(n,t.root,i,r);return new Ht(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[r]=t[s]}else i[r]=o}),i}createSegmentGroup(n,t,i,r){let o=this.createSegments(n,t.segments,i,r),a={};return Object.entries(t.children).forEach(([s,c])=>{a[s]=this.createSegmentGroup(n,c,i,r)}),new x(o,a)}createSegments(n,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,t,i){let r=i[t.path.substring(1)];if(!r)throw new K(4001,!1);return r}findOrReturn(n,t){let i=0;for(let r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}},Gr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pu(e,n,t,i,r){let o=fc(e,n,t);return o.matched?(i=tu(n,i),ku(i,n,t,r).pipe(E(a=>a===!0?o:_({},Gr)))):v(o)}function fc(e,n,t){if(n.path==="**")return Mu(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?_({},Gr):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(n.matcher||Ed)(t,e,n);if(!r)return _({},Gr);let o={};Object.entries(r.posParams??{}).forEach(([s,c])=>{o[s]=c.path});let a=r.consumed.length>0?_(_({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Mu(e){return{matched:!0,parameters:e.length>0?Qs(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ws(e,n,t,i){return t.length>0&&Lu(e,t,i)?{segmentGroup:new x(n,Ou(i,new x(t,e.children))),slicedSegments:[]}:t.length===0&&Fu(e,t,i)?{segmentGroup:new x(e.segments,Nu(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new x(e.segments,e.children),slicedSegments:t}}function Nu(e,n,t,i){let r={};for(let o of t)if(ki(e,n,o)&&!i[St(o)]){let a=new x([],{});r[St(o)]=a}return _(_({},i),r)}function Ou(e,n){let t={};t[y]=n;for(let i of e)if(i.path===""&&St(i)!==y){let r=new x([],{});t[St(i)]=r}return t}function Lu(e,n,t){return t.some(i=>ki(e,n,i)&&St(i)!==y)}function Fu(e,n,t){return t.some(i=>ki(e,n,i))}function ki(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ju(e,n,t){return n.length===0&&!e.children[t]}var Qr=class{};function Bu(e,n,t,i,r,o,a="emptyOnly"){return new Yr(e,n,t,i,r,a,o).recognize()}var zu=31,Yr=class{constructor(n,t,i,r,o,a,s){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new qr(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new K(4002,`'${n.segmentGroup}'`)}recognize(){let n=Ws(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(E(({children:t,rootSnapshot:i})=>{let r=new at(i,t),o=new Si("",r),a=Gd(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(n){let t=new We([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),y,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,y,t).pipe(E(i=>({children:i,rootSnapshot:t})),Re(i=>{if(i instanceof An)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Dn?this.noMatchError(i):i}))}processSegmentGroup(n,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,t,i,o):this.processSegment(n,t,i,i.segments,r,!0,o).pipe(E(a=>a instanceof at?[a]:[]))}processChildren(n,t,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return vt(o).pipe(hn(a=>{let s=i.children[a],c=eu(t,a);return this.processSegmentGroup(n,c,s,a,r)}),ja((a,s)=>(a.push(...s),a)),nr(null),Fa(),ct(a=>{if(a===null)return Ue(i);let s=bc(a);return Uu(s),v(s)}))}processSegment(n,t,i,r,o,a,s){return vt(t).pipe(hn(c=>this.processSegmentAgainstRoute(c._injector??n,t,c,i,r,o,a,s).pipe(Re(l=>{if(l instanceof Dn)return v(null);throw l}))),Kt(c=>!!c),Re(c=>{if(mc(c))return ju(i,r,o)?v(new Qr):Ue(i);throw c}))}processSegmentAgainstRoute(n,t,i,r,o,a,s,c){return St(i)!==a&&(a===y||!ki(r,o,i))?Ue(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,a,c):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,o,a,c):Ue(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,o,a,s){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:u,remainingSegments:h}=fc(t,r,o);if(!c)return Ue(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zu&&(this.allowRedirects=!1));let b=new We(o,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Hs(r),St(r),r.component??r._loadedComponent??null,r,qs(r)),f=xi(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(f.params),b.data=Object.freeze(f.data);let T=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,u,b,n);return this.applyRedirects.lineralizeSegments(r,T).pipe(ct(D=>this.processSegment(n,i,t,D.concat(h),a,!1,s)))}matchSegmentAgainstRoute(n,t,i,r,o,a){let s=Pu(t,i,r,n,this.urlSerializer);return i.path==="**"&&(t.children={}),s.pipe(ot(c=>c.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(ot(({routes:l})=>{let d=i._loadedInjector??n,{parameters:u,consumedSegments:h,remainingSegments:b}=c,f=new We(h,u,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Hs(i),St(i),i.component??i._loadedComponent??null,i,qs(i)),T=xi(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(T.params),f.data=Object.freeze(T.data);let{segmentGroup:D,slicedSegments:Ft}=Ws(t,h,b,l);if(Ft.length===0&&D.hasChildren())return this.processChildren(d,l,D,f).pipe(E(Yt=>new at(f,Yt)));if(l.length===0&&Ft.length===0)return v(new at(f,[]));let Te=St(i)===o;return this.processSegment(d,l,D,Ft,Te?y:o,!0,f).pipe(E(Yt=>new at(f,Yt instanceof at?[Yt]:[])))}))):Ue(t)))}getChildConfig(n,t,i){return t.children?v({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?v({routes:t._loadedRoutes,injector:t._loadedInjector}):Eu(n,t,i,this.urlSerializer).pipe(ct(r=>r?this.configLoader.loadChildren(n,t).pipe(H(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Au(t))):v({routes:[],injector:n})}};function Uu(e){e.sort((n,t)=>n.value.outlet===y?-1:t.value.outlet===y?1:n.value.outlet.localeCompare(t.value.outlet))}function Vu(e){let n=e.value.routeConfig;return n&&n.path===""}function bc(e){let n=[],t=new Set;for(let i of e){if(!Vu(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):n.push(i)}for(let i of t){let r=bc(i.children);n.push(new at(i.value,r))}return n.filter(i=>!t.has(i))}function Hs(e){return e.data||{}}function qs(e){return e.resolve||{}}function $u(e,n,t,i,r,o){return ct(a=>Bu(e,n,t,i,a.extractedUrl,r,o).pipe(E(({state:s,tree:c})=>it(_({},a),{targetSnapshot:s,urlAfterRedirects:c}))))}function Wu(e,n){return ct(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return v(t);let o=new Set(r.map(c=>c.route)),a=new Set;for(let c of o)if(!a.has(c))for(let l of gc(c))a.add(l);let s=0;return vt(a).pipe(hn(c=>o.has(c)?Hu(c,i,e,n):(c.data=xi(c,c.parent,e).resolve,v(void 0))),H(()=>s++),ir(1),ct(c=>s===a.size?v(t):kt))})}function gc(e){let n=e.children.map(t=>gc(t)).flat();return[e,...n]}function Hu(e,n,t,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!lc(r)&&(o[Mn]=r.title),qu(o,e,n,i).pipe(E(a=>(e._resolvedData=a,e.data=xi(e,e.parent,t).resolve,null)))}function qu(e,n,t,i){let r=Sr(e);if(r.length===0)return v({});let o={};return vt(r).pipe(ct(a=>Gu(e[a],n,t,i).pipe(Kt(),H(s=>{if(s instanceof kn)throw Ti(new In,s);o[a]=s}))),ir(1),La(o),Re(a=>mc(a)?kt:un(a)))}function Gu(e,n,t,i){let r=Nn(n)??i,o=Ye(e,r),a=o.resolve?o.resolve(n,t):Bt(r,()=>o(n,t));return te(a)}function Ir(e){return ot(n=>{let t=e(n);return t?vt(t).pipe(E(()=>n)):v(n)})}var _c=(()=>{class e{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===y);return i}getResolvedTitleForRoute(t){return t.data[Mn]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:()=>g(Qu),providedIn:"root"})}}return e})(),Qu=(()=>{class e extends _c{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)(Dt(ns))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),to=new N("",{providedIn:"root",factory:()=>({})}),Yu=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=yt({type:e,selectors:[["ng-component"]],standalone:!0,features:[xt],decls:1,vars:0,template:function(i,r){i&1&&mt(0,"router-outlet")},dependencies:[iu],encapsulation:2})}}return e})();function eo(e){let n=e.children&&e.children.map(eo),t=n?it(_({},e),{children:n}):_({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==y&&(t.component=Yu),t}var no=new N(""),Ku=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=g(fr)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return v(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=te(t.loadComponent()).pipe(E(vc),H(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ei(()=>{this.componentLoaders.delete(t)})),r=new Zi(i,()=>new M).pipe(Ki());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return v({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Zu(i,this.compiler,t,this.onLoadEndListener).pipe(ei(()=>{this.childrenLoaders.delete(i)})),a=new Zi(o,()=>new M).pipe(Ki());return this.childrenLoaders.set(i,a),a}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Zu(e,n,t,i){return te(e.loadChildren()).pipe(E(vc),ct(r=>r instanceof qa||Array.isArray(r)?v(r):vt(n.compileModuleAsync(r))),E(r=>{i&&i(e);let o,a,s=!1;return Array.isArray(r)?(a=r,s=!0):(o=r.create(t).injector,a=o.get(no,[],{optional:!0,self:!0}).flat()),{routes:a.map(eo),injector:o}}))}function Xu(e){return e&&typeof e=="object"&&"default"in e}function vc(e){return Xu(e)?e.default:e}var io=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:()=>g(Ju),providedIn:"root"})}}return e})(),Ju=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),th=new N("");var eh=new N(""),nh=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new M,this.transitionAbortSubject=new M,this.configLoader=g(Ku),this.environmentInjector=g(ii),this.urlSerializer=g(Zr),this.rootContexts=g(Ei),this.location=g(ai),this.inputBindingEnabled=g(Jr,{optional:!0})!==null,this.titleStrategy=g(_c),this.options=g(to,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=g(io),this.createViewTransition=g(th,{optional:!0}),this.navigationErrorHandler=g(eh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>v(void 0),this.rootComponentType=null;let t=r=>this.events.next(new Nr(r)),i=r=>this.events.next(new Or(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(it(_(_({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new rt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:wn,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),E(o=>it(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ot(o=>{let a=!1,s=!1;return v(o).pipe(ot(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",st.SupersededByNewNavigation),kt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?it(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new be(c.id,this.urlSerializer.serialize(c.rawUrl),u,kr.IgnoredSameUrlNavigation)),c.resolve(!1),kt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return v(c).pipe(ot(u=>{let h=this.transitions?.getValue();return this.events.next(new Sn(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?kt:Promise.resolve(u)}),$u(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),H(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=it(_({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new wi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:b,restoredState:f,extras:T}=c,D=new Sn(u,this.urlSerializer.serialize(h),b,f);this.events.next(D);let Ft=sc(this.rootComponentType).snapshot;return this.currentTransition=o=it(_({},c),{targetSnapshot:Ft,urlAfterRedirects:h,extras:it(_({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,v(o)}else{let u="";return this.events.next(new be(c.id,this.urlSerializer.serialize(c.extractedUrl),u,kr.IgnoredByUrlHandlingStrategy)),c.resolve(!1),kt}}),H(c=>{let l=new Dr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),E(c=>(this.currentTransition=o=it(_({},c),{guards:lu(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),yu(this.environmentInjector,c=>this.events.next(c)),H(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ti(this.urlSerializer,c.guardsResult);let l=new Ar(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),lt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",st.GuardRejected),!1)),Ir(c=>{if(c.guards.canActivateChecks.length)return v(c).pipe(H(l=>{let d=new Pr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ot(l=>{let d=!1;return v(l).pipe(Wu(this.paramsInheritanceStrategy,this.environmentInjector),H({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",st.NoDataFromResolver)}}))}),H(l=>{let d=new Mr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Ir(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(H(h=>{d.component=h}),E(()=>{})));for(let h of d.children)u.push(...l(h));return u};return Ji(l(c.targetSnapshot.root)).pipe(nr(null),Ee(1))}),Ir(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?vt(d).pipe(E(()=>o)):v(o)}),E(c=>{let l=ru(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=it(_({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),H(()=>{this.events.next(new Rn)}),cu(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ee(1),H({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),tt(this.transitionAbortSubject.pipe(H(c=>{throw c}))),ei(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",st.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Re(c=>{if(s=!0,hc(c))this.events.next(new Wt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),su(c)?this.events.next(new Ge(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Tn(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Bt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof kn){let{message:u,cancellationCode:h}=Ti(this.urlSerializer,d);this.events.next(new Wt(o.id,this.urlSerializer.serialize(o.extractedUrl),u,h)),this.events.next(new Ge(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let u=t.errorHandler(c);o.resolve(!!u)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return kt}))}))}cancelNavigationTransition(t,i,r){let o=new Wt(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ih(e){return e!==wn}var rh=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:()=>g(oh),providedIn:"root"})}}return e})(),Kr=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},oh=(()=>{class e extends Kr{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ri(e)))(r||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yc=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:()=>g(ah),providedIn:"root"})}}return e})(),ah=(()=>{class e extends yc{constructor(){super(...arguments),this.location=g(ai),this.urlSerializer=g(Zr),this.options=g(to,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=g(io),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ht,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=sc(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Sn)this.stateMemento=this.createStateMemento();else if(t instanceof be)this.rawUrlTree=i.initialUrl;else if(t instanceof wi){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Rn?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Wt&&(t.code===st.GuardRejected||t.code===st.NoDataFromResolver)?this.restoreHistory(i):t instanceof Tn?this.restoreHistory(i,!0):t instanceof Jt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof Ht?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,a=_(_({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",a)}else{let o=_(_({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ri(e)))(r||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),vn=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(vn||{});function sh(e,n){e.events.pipe(lt(t=>t instanceof Jt||t instanceof Wt||t instanceof Tn||t instanceof be),E(t=>t instanceof Jt||t instanceof be?vn.COMPLETE:(t instanceof Wt?t.code===st.Redirect||t.code===st.SupersededByNewNavigation:!1)?vn.REDIRECTING:vn.FAILED),lt(t=>t!==vn.REDIRECTING),Ee(1)).subscribe(()=>{n()})}function ch(e){throw e}var lh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ro=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=g(Xa),this.stateManager=g(yc),this.options=g(to,{optional:!0})||{},this.pendingTasks=g(Va),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=g(nh),this.urlSerializer=g(Zr),this.location=g(ai),this.urlHandlingStrategy=g(io),this._events=new M,this.errorHandler=this.options.errorHandler||ch,this.navigated=!1,this.routeReuseStrategy=g(rh),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=g(no,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!g(Jr,{optional:!0}),this.eventsSubscription=new jt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Wt&&i.code!==st.Redirect&&i.code!==st.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Jt)this.navigated=!0;else if(i instanceof Ge){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=_({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ih(r.source)},a);this.scheduleNavigation(s,wn,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}hh(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),wn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=_({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let s=this.parseUrl(t);this.scheduleNavigation(s,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":d=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=ic(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),u=this.currentUrlTree.root}return rc(u,t,d,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=fe(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,wn,null,i)}navigate(t,i={skipLocationChange:!1}){return uh(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=_({},lh):i===!1?r=_({},dh):r=i,fe(t))return zs(this.currentUrlTree,t,r);let o=this.parseUrl(t);return zs(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,c,l;a?(s=a.resolve,c=a.reject,l=a.promise):l=new Promise((u,h)=>{s=u,c=h});let d=this.pendingTasks.add();return sh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:s,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function uh(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new K(4008,!1)}function hh(e){return!(e instanceof Rn)&&!(e instanceof Ge)}var cb=(()=>{class e{constructor(t,i,r,o,a,s){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=s,this.href=null,this.onChanges=new M,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Jt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fe(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(t!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:Wa(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fe(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||e)(p(ro),p(ge),ar("tabindex"),p(Ha),p(V),p(br))}}static{this.\u0275dir=B({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&Ct("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Pt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",P],skipLocationChange:[2,"skipLocationChange","skipLocationChange",P],replaceUrl:[2,"replaceUrl","replaceUrl",P],routerLink:"routerLink"},standalone:!0,features:[ut,De]})}}return e})();var mh=new N("");function lb(e,...n){return ni([{provide:no,multi:!0,useValue:e},[],{provide:ge,useFactory:ph,deps:[ro]},{provide:ts,multi:!0,useFactory:fh},n.map(t=>t.\u0275providers)])}function ph(e){return e.routerState.root}function fh(){let e=g(ce);return n=>{let t=e.get(es);if(n!==t.components[0])return;let i=e.get(ro),r=e.get(bh);e.get(gh)===1&&i.initialNavigation(),e.get(_h,null,or.Optional)?.setUpPreloading(),e.get(mh,null,or.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var bh=new N("",{factory:()=>new M}),gh=new N("",{providedIn:"root",factory:()=>1});var _h=new N("");var vh=["mat-button",""],yh=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],wh=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Ch=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Ih=["mat-icon-button",""],xh=["*"];var Sh=new N("MAT_BUTTON_CONFIG");var Th=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Cc=(()=>{class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,r,o){this._elementRef=t,this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=g(ls),this._rippleLoader=g(hs),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=g(Sh,{optional:!0}),s=t.nativeElement,c=s.classList;this.disabledInteractive=a?.disabledInteractive??!1,this.color=a?.color??null,this._rippleLoader?.configureRipple(s,{className:"mat-mdc-button-ripple"});for(let{attribute:l,mdcClasses:d}of Th)s.hasAttribute(l)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){sr()}}static{this.\u0275dir=B({type:e,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",P],disabled:[2,"disabled","disabled",P],ariaDisabled:[2,"aria-disabled","ariaDisabled",P],disabledInteractive:[2,"disabledInteractive","disabledInteractive",P]},features:[ut]})}}return e})();var Ib=(()=>{class e extends Cc{constructor(t,i,r,o){super(t,i,r,o)}static{this.\u0275fac=function(i){return new(i||e)(p(V),p(pt),p(Z),p(le,8))}}static{this.\u0275cmp=yt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Pt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),de(r.color?"mat-"+r.color:""),X("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[dt,xt],attrs:vh,ngContentSelectors:wh,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Zt(yh),mt(0,"span",0),Mt(1),J(2,"span",1),Mt(3,1),ht(),Mt(4,2),mt(5,"span",2)(6,"span",3)),i&2&&X("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return e})();var xb=(()=>{class e extends Cc{constructor(t,i,r,o){super(t,i,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(i){return new(i||e)(p(V),p(pt),p(Z),p(le,8))}}static{this.\u0275cmp=yt({type:e,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Pt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),de(r.color?"mat-"+r.color:""),X("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[dt,xt],attrs:Ih,ngContentSelectors:xh,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Zt(),mt(0,"span",0),Mt(1),mt(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Ch],encapsulation:2,changeDetection:0})}}return e})();var Sb=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=se({type:e})}static{this.\u0275inj=ae({imports:[Fe,us,Fe]})}}return e})();var Ln=class{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},oo=class extends Ln{constructor(n,t,i,r,o){super(),this.component=n,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Ke=class extends Ln{constructor(n,t,i,r){super(),this.templateRef=n,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}},ao=class extends Ln{constructor(n){super(),this.element=n instanceof V?n.nativeElement:n}},so=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof oo)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Ke)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof ao)return this._attachedPortal=n,this.attachDomPortal(n)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Ic=(()=>{class e extends Ke{constructor(t,i){super(t,i)}static{this.\u0275fac=function(i){return new(i||e)(p(zt),p(At))}}static{this.\u0275dir=B({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[dt]})}}return e})();var Di=(()=>{class e extends so{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new F,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let s=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(s,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{s.parentNode&&s.parentNode.replaceChild(a,s)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||e)(p(oi),p(At),p(Xt))}}static{this.\u0275dir=B({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[dt]})}}return e})();var Eh=20,kh=(()=>{class e{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new M,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Eh){return this._platform.isBrowser?new ie(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(er(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):v()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(lt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=as(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return re(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||e)(Dt(Z),Dt(pt),Dt(Xt,8))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),xc=(()=>{class e{constructor(t,i,r,o){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=o,this._destroyed=new M,this._elementScrolled=new ie(a=>this.ngZone.runOutsideAngular(()=>re(this.elementRef.nativeElement,"scroll").pipe(tt(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=r?t.end:t.start),t.right==null&&(t.right=r?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&Oe()!=Ne.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Oe()==Ne.INVERTED?t.left=t.right:Oe()==Ne.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;rs()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",r="right",o=this.elementRef.nativeElement;if(t=="top")return o.scrollTop;if(t=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let a=this.dir&&this.dir.value=="rtl";return t=="start"?t=a?r:i:t=="end"&&(t=a?i:r),a&&Oe()==Ne.INVERTED?t==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&Oe()==Ne.NEGATED?t==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static{this.\u0275fac=function(i){return new(i||e)(p(V),p(kh),p(Z),p(Le,8))}}static{this.\u0275dir=B({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return e})(),Dh=20,co=(()=>{class e{constructor(t,i,r){this._platform=t,this._change=new M,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),a=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,s=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:a,left:s}}change(t=Dh){return t>0?this._change.pipe(er(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||e)(Dt(pt),Dt(Z),Dt(Xt,8))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var lo=class{constructor(n){this._box=n,this._destroyed=new M,this._resizeSubject=new M,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new ie(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),i.unsubscribe(),this._elementObservables.delete(n)}}).pipe(lt(t=>t.some(i=>i.target===n)),rr({bufferSize:1,refCount:!0}),tt(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Sc=(()=>{class e{constructor(){this._observers=new Map,this._ngZone=g(Z),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new lo(r)),this._observers.get(r).observe(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var po=["*"];function Nh(e,n){e&1&&Mt(0)}var Oh=["tabListContainer"],Lh=["tabList"],Fh=["tabListInner"],jh=["nextPaginator"],Bh=["previousPaginator"],zh=e=>({animationDuration:e}),Uh=(e,n)=>({value:e,params:n});function Vh(e,n){}var $h=["tabBodyWrapper"],Wh=["tabHeader"];function Hh(e,n){}function qh(e,n){if(e&1&&Ae(0,Hh,0,0,"ng-template",12),e&2){let t=Vt().$implicit;Ut("cdkPortalOutlet",t.templateLabel)}}function Gh(e,n){if(e&1&&Qa(0),e&2){let t=Vt().$implicit;Ya(t.textLabel)}}function Qh(e,n){if(e&1){let t=Pe();J(0,"div",7,2),Ct("click",function(){let r=z(t),o=r.$implicit,a=r.$index,s=Vt(),c=pr(1);return U(s._handleClick(o,c,a))})("cdkFocusChange",function(r){let o=z(t).$index,a=Vt();return U(a._tabFocusChanged(r,o))}),mt(2,"span",8)(3,"div",9),J(4,"span",10)(5,"span",11),Ae(6,qh,1,1,null,12)(7,Gh,1,1),ht()()()}if(e&2){let t=n.$implicit,i=n.$index,r=pr(1),o=Vt();de(t.labelClass),X("mdc-tab--active",o.selectedIndex===i),Ut("id",o._getTabLabelId(i))("disabled",t.disabled)("fitInkBarToContent",o.fitInkBarToContent),Pt("tabIndex",o._getTabIndex(i))("aria-posinset",i+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(i))("aria-selected",o.selectedIndex===i)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),wt(3),Ut("matRippleTrigger",r)("matRippleDisabled",t.disabled||o.disableRipple),wt(3),dr(t.templateLabel?6:7)}}function Yh(e,n){e&1&&Mt(0)}function Kh(e,n){if(e&1){let t=Pe();J(0,"mat-tab-body",13),Ct("_onCentered",function(){z(t);let r=Vt();return U(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){z(t);let o=Vt();return U(o._setTabBodyWrapperHeight(r))}),ht()}if(e&2){let t=n.$implicit,i=n.$index,r=Vt();de(t.bodyClass),X("mat-mdc-tab-body-active",r.selectedIndex===i),Ut("id",r._getTabContentId(i))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Pt("tabindex",r.contentTabIndex!=null&&r.selectedIndex===i?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(i))("aria-hidden",r.selectedIndex!==i)}}var Zh=new N("MatTabContent"),Xh=(()=>{class e{constructor(t){this.template=t}static{this.\u0275fac=function(i){return new(i||e)(p(zt))}}static{this.\u0275dir=B({type:e,selectors:[["","matTabContent",""]],standalone:!0,features:[ue([{provide:Zh,useExisting:e}])]})}}return e})(),Jh=new N("MatTabLabel"),Ec=new N("MAT_TAB"),tm=(()=>{class e extends Ic{constructor(t,i,r){super(t,i),this._closestTab=r}static{this.\u0275fac=function(i){return new(i||e)(p(zt),p(At),p(Ec,8))}}static{this.\u0275dir=B({type:e,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[ue([{provide:Jh,useExisting:e}]),dt]})}}return e})(),kc=new N("MAT_TAB_GROUP"),em=(()=>{class e{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}constructor(t,i){this._viewContainerRef=t,this._closestTabGroup=i,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new M,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Ke(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}static{this.\u0275fac=function(i){return new(i||e)(p(At),p(kc,8))}}static{this.\u0275cmp=yt({type:e,selectors:[["mat-tab"]],contentQueries:function(i,r,o){if(i&1&&(Me(o,tm,5),Me(o,Xh,7,zt)),i&2){let a;q(a=G())&&(r.templateLabel=a.first),q(a=G())&&(r._explicitContent=a.first)}},viewQuery:function(i,r){if(i&1&&It(zt,7),i&2){let o;q(o=G())&&(r._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",P],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[ue([{provide:Ec,useExisting:e}]),ut,De,xt],ngContentSelectors:po,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Ae(0,Nh,1,0,"ng-template"))},encapsulation:2})}}return e})(),uo="mdc-tab-indicator--active",Tc="mdc-tab-indicator--no-transition",ho=class{constructor(n){this._items=n}hide(){this._items.forEach(n=>n.deactivateInkBar())}alignToElement(n){let t=this._items.find(r=>r.elementRef.nativeElement===n),i=this._currentItem;if(t!==i&&(i?.deactivateInkBar(),t)){let r=i?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(r),this._currentItem=t}}},nm=(()=>{class e{constructor(){this._elementRef=g(V),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(t){this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(t){let i=this._elementRef.nativeElement;if(!t||!i.getBoundingClientRect||!this._inkBarContentElement){i.classList.add(uo);return}let r=i.getBoundingClientRect(),o=t.width/r.width,a=t.left-r.left;i.classList.add(Tc),this._inkBarContentElement.style.setProperty("transform",`translateX(${a}px) scaleX(${o})`),i.getBoundingClientRect(),i.classList.remove(Tc),i.classList.add(uo),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(uo)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let t=this._elementRef.nativeElement.ownerDocument||document,i=this._inkBarElement=t.createElement("span"),r=this._inkBarContentElement=t.createElement("span");i.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",i.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let t=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;t.appendChild(this._inkBarElement)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=B({type:e,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",P]},features:[ut]})}}return e})();var Dc=(()=>{class e extends nm{constructor(t){super(),this.elementRef=t,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static{this.\u0275fac=function(i){return new(i||e)(p(V))}}static{this.\u0275dir=B({type:e,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(i,r){i&2&&(Pt("aria-disabled",!!r.disabled),X("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[2,"disabled","disabled",P]},standalone:!0,features:[ut,dt]})}}return e})(),Rc=is({passive:!0}),im=650,rm=100,om=(()=>{class e{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){let i=isNaN(t)?0:t;this._selectedIndex!=i&&(this._selectedIndexChanged=!0,this._selectedIndex=i,this._keyManager&&this._keyManager.updateActiveItem(i))}constructor(t,i,r,o,a,s,c){this._elementRef=t,this._changeDetectorRef=i,this._viewportRuler=r,this._dir=o,this._ngZone=a,this._platform=s,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new M,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new M,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new F,this.indexFocused=new F,this._sharedResizeObserver=g(Sc),this._injector=g(ce),a.runOutsideAngular(()=>{re(t.nativeElement,"mouseleave").pipe(tt(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){re(this._previousPaginator.nativeElement,"touchstart",Rc).pipe(tt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),re(this._nextPaginator.nativeElement,"touchstart",Rc).pipe(tt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let t=this._dir?this._dir.change:v("ltr"),i=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe(Oa(32),tt(this._destroyed)),r=this._viewportRuler.change(150).pipe(tt(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new cs(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),cr(o,{injector:this._injector}),ti(t,r,i,this._items.changes,this._itemsResized()).pipe(tt(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(a=>{this.indexFocused.emit(a),this._setTabFocus(a)})}_itemsResized(){return typeof ResizeObserver!="function"?kt:this._items.changes.pipe(oe(this._items),ot(t=>new ie(i=>this._ngZone.runOutsideAngular(()=>{let r=new ResizeObserver(o=>i.next(o));return t.forEach(o=>r.observe(o.elementRef.nativeElement)),()=>{r.disconnect()}}))),Ba(1),lt(t=>t.some(i=>i.contentRect.width>0&&i.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!os(t))switch(t.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let i=this._items.get(this.focusIndex);i&&!i.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){let t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return this._items?!!this._items.toArray()[t]:!0}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();let i=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?i.scrollLeft=0:i.scrollLeft=i.scrollWidth-i.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let t=this.scrollDistance,i=this._getLayoutDirection()==="ltr"?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(i)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){let i=this._tabListContainer.nativeElement.offsetWidth,r=(t=="before"?-1:1)*i/3;return this._scrollTo(this._scrollDistance+r)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;let i=this._items?this._items.toArray()[t]:null;if(!i)return;let r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:a}=i.elementRef.nativeElement,s,c;this._getLayoutDirection()=="ltr"?(s=o,c=s+a):(c=this._tabListInner.nativeElement.offsetWidth-o,s=c-a);let l=this.scrollDistance,d=this.scrollDistance+r;s<l?this.scrollDistance-=l-s:c>d&&(this.scrollDistance+=Math.min(c-d,s-l))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let t=this._tabListInner.nativeElement.scrollWidth,i=this._elementRef.nativeElement.offsetWidth,r=t-i>=5;r||(this.scrollDistance=0),r!==this._showPaginationControls&&(this._showPaginationControls=r,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let t=this._tabListInner.nativeElement.scrollWidth,i=this._tabListContainer.nativeElement.offsetWidth;return t-i||0}_alignInkBarToSelectedTab(){let t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,i=t?t.elementRef.nativeElement:null;i?this._inkBar.alignToElement(i):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,i){i&&i.button!=null&&i.button!==0||(this._stopInterval(),Na(im,rm).pipe(tt(ti(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:r,distance:o}=this._scrollHeader(t);(o===0||o>=r)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let i=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(i,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:i,distance:this._scrollDistance}}static{this.\u0275fac=function(i){return new(i||e)(p(V),p($t),p(co),p(Le,8),p(Z),p(pt),p(le,8))}}static{this.\u0275dir=B({type:e,inputs:{disablePagination:[2,"disablePagination","disablePagination",P],selectedIndex:[2,"selectedIndex","selectedIndex",mn]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[ut]})}}return e})(),am=(()=>{class e extends om{constructor(t,i,r,o,a,s,c){super(t,i,r,o,a,s,c),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new ho(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}static{this.\u0275fac=function(i){return new(i||e)(p(V),p($t),p(co),p(Le,8),p(Z),p(pt),p(le,8))}}static{this.\u0275cmp=yt({type:e,selectors:[["mat-tab-header"]],contentQueries:function(i,r,o){if(i&1&&Me(o,Dc,4),i&2){let a;q(a=G())&&(r._items=a)}},viewQuery:function(i,r){if(i&1&&(It(Oh,7),It(Lh,7),It(Fh,7),It(jh,5),It(Bh,5)),i&2){let o;q(o=G())&&(r._tabListContainer=o.first),q(o=G())&&(r._tabList=o.first),q(o=G())&&(r._tabListInner=o.first),q(o=G())&&(r._nextPaginator=o.first),q(o=G())&&(r._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(i,r){i&2&&X("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl",r._getLayoutDirection()=="rtl")},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",P]},standalone:!0,features:[ut,dt,xt],ngContentSelectors:po,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(i,r){if(i&1){let o=Pe();Zt(),J(0,"div",5,0),Ct("click",function(){return z(o),U(r._handlePaginatorClick("before"))})("mousedown",function(s){return z(o),U(r._handlePaginatorPress("before",s))})("touchend",function(){return z(o),U(r._stopInterval())}),mt(2,"div",6),ht(),J(3,"div",7,1),Ct("keydown",function(s){return z(o),U(r._handleKeydown(s))}),J(5,"div",8,2),Ct("cdkObserveContent",function(){return z(o),U(r._onContentChanges())}),J(7,"div",9,3),Mt(9),ht()()(),J(10,"div",10,4),Ct("mousedown",function(s){return z(o),U(r._handlePaginatorPress("after",s))})("click",function(){return z(o),U(r._handlePaginatorClick("after"))})("touchend",function(){return z(o),U(r._stopInterval())}),mt(12,"div",6),ht()}i&2&&(X("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),Ut("matRippleDisabled",r._disableScrollBefore||r.disableRipple),wt(3),X("_mat-animation-noopable",r._animationMode==="NoopAnimations"),wt(2),Pt("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null),wt(5),X("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),Ut("matRippleDisabled",r._disableScrollAfter||r.disableRipple))},dependencies:[gr,ss],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}}return e})(),sm=new N("MAT_TABS_CONFIG"),cm={translateTab:ms("translateTab",[ci("center, void, left-origin-center, right-origin-center",je({transform:"none",visibility:"visible"})),ci("left",je({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),ci("right",je({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),li("* => left, * => right, left => center, right => center",si("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),li("void => left-origin-center",[je({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),si("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),li("void => right-origin-center",[je({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),si("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},lm=(()=>{class e extends Di{constructor(t,i,r,o){super(t,i,o),this._host=r,this._centeringSub=jt.EMPTY,this._leavingSub=jt.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(oe(this._host._isCenterPosition(this._host._position))).subscribe(t=>{this._host._content&&t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)(p(oi),p(At),p(za(()=>Ac)),p(Xt))}}static{this.\u0275dir=B({type:e,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[dt]})}}return e})(),Ac=(()=>{class e{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,i,r){this._elementRef=t,this._dir=i,this._dirChangeSubscription=jt.EMPTY,this._translateTabComplete=new M,this._onCentering=new F,this._beforeCentering=new F,this._afterLeavingCenter=new F,this._onCentered=new F(!0),this.animationDuration="500ms",this.preserveContent=!1,i&&(this._dirChangeSubscription=i.change.subscribe(o=>{this._computePositionAnimationState(o),r.markForCheck()})),this._translateTabComplete.subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){let i=this._isCenterPosition(t.toState);this._beforeCentering.emit(i),i&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(t){return t=="center"||t=="left-origin-center"||t=="right-origin-center"}_computePositionAnimationState(t=this._getLayoutDirection()){this._positionIndex<0?this._position=t=="ltr"?"left":"right":this._positionIndex>0?this._position=t=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(t){let i=this._getLayoutDirection();return i=="ltr"&&t<=0||i=="rtl"&&t>0?"left-origin-center":"right-origin-center"}static{this.\u0275fac=function(i){return new(i||e)(p(V),p(Le,8),p($t))}}static{this.\u0275cmp=yt({type:e,selectors:[["mat-tab-body"]],viewQuery:function(i,r){if(i&1&&It(Di,5),i&2){let o;q(o=G())&&(r._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[xt],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(i,r){if(i&1){let o=Pe();J(0,"div",1,0),Ct("@translateTab.start",function(s){return z(o),U(r._onTranslateTabStarted(s))})("@translateTab.done",function(s){return z(o),U(r._translateTabComplete.next(s))}),Ae(2,Vh,0,0,"ng-template",2),ht()}i&2&&Ut("@translateTab",Za(3,Uh,r._position,Ka(1,zh,r.animationDuration)))},dependencies:[lm,xc],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[cm.translateTab]}})}}return e})(),dm=0,um=!0,xg=(()=>{class e{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}get animationDuration(){return this._animationDuration}set animationDuration(t){let i=t+"";this._animationDuration=/^\d+$/.test(i)?t+"ms":i}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){if(!um)throw new Error("mat-tab-group background color must be set through the Sass theming API");let i=this._elementRef.nativeElement.classList;i.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&i.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,i,r,o){this._elementRef=t,this._changeDetectorRef=i,this._animationMode=o,this._tabs=new $a,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=jt.EMPTY,this._tabLabelSubscription=jt.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new F,this.focusChange=new F,this.animationDone=new F,this.selectedTabChange=new F(!0),this._isServer=!g(pt).isBrowser,this._groupId=dm++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=r&&r.disablePagination!=null?r.disablePagination:!1,this.dynamicHeight=r&&r.dynamicHeight!=null?r.dynamicHeight:!1,r?.contentTabIndex!=null&&(this.contentTabIndex=r.contentTabIndex),this.preserveContent=!!r?.preserveContent,this.fitInkBarToContent=r&&r.fitInkBarToContent!=null?r.fitInkBarToContent:!1,this.stretchTabs=r&&r.stretchTabs!=null?r.stretchTabs:!0}ngAfterContentChecked(){let t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){let i=this._selectedIndex==null;if(!i){this.selectedTabChange.emit(this._createChangeEvent(t));let r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,o)=>r.isActive=o===t),i||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((i,r)=>{i.position=r-t,this._selectedIndex!=null&&i.position==0&&!i.origin&&(i.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){let i=this._tabs.toArray(),r;for(let o=0;o<i.length;o++)if(i[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,r=i[o];break}!r&&i[t]&&Promise.resolve().then(()=>{i[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(oe(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(i=>i._closestTabGroup===this||!i._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){let i=this._tabHeader;i&&(i.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){let i=new mo;return i.index=t,this._tabs&&this._tabs.length&&(i.tab=this._tabs.toArray()[t]),i}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=ti(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let i=this._tabBodyWrapper.nativeElement;i.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(i.style.height=t+"px")}_removeTabBodyWrapperHeight(){let t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,i,r){i.focusIndex=r,t.disabled||(this.selectedIndex=r)}_getTabIndex(t){let i=this._lastFocusedTabIndex??this.selectedIndex;return t===i?0:-1}_tabFocusChanged(t,i){t&&t!=="mouse"&&t!=="touch"&&(this._tabHeader.focusIndex=i)}static{this.\u0275fac=function(i){return new(i||e)(p(V),p($t),p(sm,8),p(le,8))}}static{this.\u0275cmp=yt({type:e,selectors:[["mat-tab-group"]],contentQueries:function(i,r,o){if(i&1&&Me(o,em,5),i&2){let a;q(a=G())&&(r._allTabs=a)}},viewQuery:function(i,r){if(i&1&&(It($h,5),It(Wh,5)),i&2){let o;q(o=G())&&(r._tabBodyWrapper=o.first),q(o=G())&&(r._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(i,r){i&2&&(de("mat-"+(r.color||"primary")),lr("--mat-tab-animation-duration",r.animationDuration),X("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header",r.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",P],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",P],dynamicHeight:[2,"dynamicHeight","dynamicHeight",P],selectedIndex:[2,"selectedIndex","selectedIndex",mn],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",mn],disablePagination:[2,"disablePagination","disablePagination",P],disableRipple:[2,"disableRipple","disableRipple",P],preserveContent:[2,"preserveContent","preserveContent",P],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[ue([{provide:kc,useExisting:e}]),ut,xt],ngContentSelectors:po,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(i,r){if(i&1){let o=Pe();Zt(),J(0,"mat-tab-header",3,0),Ct("indexFocused",function(s){return z(o),U(r._focusChanged(s))})("selectFocusedIndex",function(s){return z(o),U(r.selectedIndex=s)}),hr(2,Qh,8,17,"div",4,ur),ht(),Ae(4,Yh,1,0),J(5,"div",5,1),hr(7,Kh,1,13,"mat-tab-body",6,ur),ht()}i&2&&(Ut("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),wt(2),mr(r._tabs),wt(2),dr(r._isServer?4:-1),wt(),X("_mat-animation-noopable",r._animationMode==="NoopAnimations"),wt(2),mr(r._tabs))},dependencies:[am,Dc,ds,gr,Di,Ac],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height);font-family:var(--mat-tab-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-app-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-app-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height);border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-app-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}}return e})(),mo=class{};var Sg=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=se({type:e})}static{this.\u0275inj=ae({imports:[Fe,Fe]})}}return e})();var Pc="@firebase/database",Mc="1.0.8";var ha="";function hm(e){ha=e}var Co=class{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,t){t==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),j(t))}get(n){let t=this.domStorage_.getItem(this.prefixedName_(n));return t==null?null:ui(t)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}};var Io=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,t){t==null?delete this.cache_[n]:this.cache_[n]=t}get(n){return Ot(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}};var ul=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let n=window[e];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Co(n)}}catch{}return new Io},ve=ul("localStorage"),xo=ul("sessionStorage");var Je=new Rs("@firebase/database"),mm=function(){let e=1;return function(){return e++}}(),hl=function(e){let n=xs(e),t=new Is;t.update(n);let i=t.digest();return ps.encodeByteArray(i)},Yn=function(...e){let n="";for(let t=0;t<e.length;t++){let i=e[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=Yn.apply(null,i):typeof i=="object"?n+=j(i):n+=i,n+=" "}return n},we=null,Nc=!0,pm=function(e,n){m(!n||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Je.logLevel=Ts.VERBOSE,we=Je.log.bind(Je),n&&xo.set("logging_enabled",!0)):typeof e=="function"?we=e:(we=null,xo.remove("logging_enabled"))},Q=function(...e){if(Nc===!0&&(Nc=!1,we===null&&xo.get("logging_enabled")===!0&&pm(!0)),we){let n=Yn.apply(null,e);we(n)}},Kn=function(e){return function(...n){Q(e,...n)}},So=function(...e){let n="FIREBASE INTERNAL ERROR: "+Yn(...e);Je.error(n)},Gt=function(...e){let n=`FIREBASE FATAL ERROR: ${Yn(...e)}`;throw Je.error(n),new Error(n)},et=function(...e){let n="FIREBASE WARNING: "+Yn(...e);Je.warn(n)},fm=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ml=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},bm=function(e){if(Nt()||document.readyState==="complete")e();else{let n=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}n||(n=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},en="[MIN_NAME]",Ce="[MAX_NAME]",cn=function(e,n){if(e===n)return 0;if(e===en||n===Ce)return-1;if(n===en||e===Ce)return 1;{let t=Oc(e),i=Oc(n);return t!==null?i!==null?t-i===0?e.length-n.length:t-i:-1:i!==null?1:e<n?-1:1}},gm=function(e,n){return e===n?0:e<n?-1:1},Fn=function(e,n){if(n&&e in n)return n[e];throw new Error("Missing required key ("+e+") in object: "+j(n))},ma=function(e){if(typeof e!="object"||e===null)return j(e);let n=[];for(let i in e)n.push(i);n.sort();let t="{";for(let i=0;i<n.length;i++)i!==0&&(t+=","),t+=j(n[i]),t+=":",t+=ma(e[n[i]]);return t+="}",t},pl=function(e,n){let t=e.length;if(t<=n)return[e];let i=[];for(let r=0;r<t;r+=n)r+n>t?i.push(e.substring(r,t)):i.push(e.substring(r,r+n));return i};function _t(e,n){for(let t in e)e.hasOwnProperty(t)&&n(t,e[t])}var fl=function(e){m(!ml(e),"Invalid JSON number");let n=11,t=52,i=(1<<n-1)-1,r,o,a,s,c;e===0?(o=0,a=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),i),o=s+i,a=Math.round(e*Math.pow(2,t-s)-Math.pow(2,t))):(o=0,a=Math.round(e/Math.pow(2,1-i-t))));let l=[];for(c=t;c;c-=1)l.push(a%2?1:0),a=Math.floor(a/2);for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(r?1:0),l.reverse();let d=l.join(""),u="";for(c=0;c<64;c+=8){let h=parseInt(d.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},_m=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vm=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var ym=new RegExp("^-?(0*)\\d{1,10}$"),wm=-2147483648,Cm=2147483647,Oc=function(e){if(ym.test(e)){let n=Number(e);if(n>=wm&&n<=Cm)return n}return null},ln=function(e){try{e()}catch(n){setTimeout(()=>{let t=n.stack||"";throw et("Exception was thrown by user callback.",t),n},Math.floor(0))}},Im=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vn=function(e,n){let t=setTimeout(e,n);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var To=class{constructor(n,t){this.appName_=n,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(t,i):t(null)},0)})}addTokenChangeListener(n){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(n))}notifyForInvalidToken(){et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ro=class{constructor(n,t,i){this.appName_=n,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(t=>t&&t.code==="auth/token-not-initialized"?(Q("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(t,i):t(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(t=>t.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(t=>t.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',et(n)}},$n=(()=>{class e{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Pi="5",bl="v",gl="s",_l="r",vl="f",yl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wl="ls",Cl="p",Eo="ac",Il="websocket",xl="long_polling";var Mi=class{constructor(n,t,i,r,o=!1,a="",s=!1,c=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=c,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ve.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&ve.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){let n=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${t}`}};function xm(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Sl(e,n,t){m(typeof n=="string","typeof type must == string"),m(typeof t=="object","typeof params must == object");let i;if(n===Il)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(n===xl)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);xm(e)&&(t.ns=e.namespace);let r=[];return _t(t,(o,a)=>{r.push(o+"="+a)}),i+r.join("&")}var ko=class{constructor(){this.counters_={}}incrementCounter(n,t=1){Ot(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=t}get(){return bs(this.counters_)}};var fo={},bo={};function pa(e){let n=e.toString();return fo[n]||(fo[n]=new ko),fo[n]}function Sm(e,n){let t=e.toString();return bo[t]||(bo[t]=n()),bo[t]}var Do=class{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,t){this.closeAfterResponse=n,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,t){for(this.pendingResponses[n]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ln(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Lc="start",Tm="close",Rm="pLPCommand",Em="pRTLPCB",Tl="id",Rl="pw",El="ser",km="cb",Dm="seg",Am="ts",Pm="d",Mm="dframe",kl=1870,Dl=30,Nm=kl-Dl,Om=25e3,Lm=3e4,Ao=class e{constructor(n,t,i,r,o,a,s){this.connId=n,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kn(n),this.stats_=pa(t),this.urlFn=c=>(this.appCheckToken&&(c[Eo]=this.appCheckToken),Sl(t,xl,c))}open(n,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Do(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Lm)),bm(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Po((...o)=>{let[a,s,c,l,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===Lc)this.id=s,this.password=c;else if(a===Tm)s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{let[a,s]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,s)},()=>{this.onClosed_()},this.urlFn);let i={};i[Lc]="t",i[El]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[km]=this.scriptTagHolder.uniqueCallbackIdentifier),i[bl]=Pi,this.transportSessionId&&(i[gl]=this.transportSessionId),this.lastSessionId&&(i[wl]=this.lastSessionId),this.applicationId&&(i[Cl]=this.applicationId),this.appCheckToken&&(i[Eo]=this.appCheckToken),typeof location<"u"&&location.hostname&&yl.test(location.hostname)&&(i[_l]=vl);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Nt()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_m()&&!vm()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){let t=j(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=fs(t),r=pl(i,Nm);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(n,t){if(Nt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[Mm]="t",i[Tl]=n,i[Rl]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){let t=j(n).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Po=class e{constructor(n,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Nt())this.commandCB=n,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=mm(),window[Rm+this.uniqueCallbackIdentifier]=n,window[Em+this.uniqueCallbackIdentifier]=t,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){Q("frame writing exception"),s.stack&&Q(s.stack),Q(s)}}}static createIFrame_(){let n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||Q("No IE domain setting required")}catch{let i=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,t){for(this.myID=n,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let n={};n[Tl]=this.myID,n[Rl]=this.myPW,n[El]=this.currentSerial;let t=this.urlFn(n),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Dl+i.length<=kl;){let a=this.pendingSegs.shift();i=i+"&"+Dm+r+"="+a.seg+"&"+Am+r+"="+a.ts+"&"+Pm+r+"="+a.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(n,t,i){this.pendingSegs.push({seg:n,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(n,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(Om)),o=()=>{clearTimeout(r),i()};this.addTag(n,o)}addTag(n,t){Nt()?this.doNodeLongPoll(n,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=n,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Q("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Fm=16384,jm=45e3,Ni=null;typeof MozWebSocket<"u"?Ni=MozWebSocket:typeof WebSocket<"u"&&(Ni=WebSocket);var jn=(()=>{class e{constructor(t,i,r,o,a,s,c){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kn(this.connId),this.stats_=pa(i),this.connURL=e.connectionURL_(i,s,c,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,a){let s={};return s[bl]=Pi,!Nt()&&typeof location<"u"&&location.hostname&&yl.test(location.hostname)&&(s[_l]=vl),i&&(s[gl]=i),r&&(s[wl]=r),o&&(s[Eo]=o),a&&(s[Cl]=a),Sl(t,Il,s)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ve.set("previous_websocket_failure",!0);try{let r;if(Nt()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Pi}/${ha}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let a=process.env,s=this.connURL.indexOf("wss://")===0?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(r.proxy={origin:s})}this.mySock=new Ni(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Ni!==null&&!e.forceDisallow_}static previouslyFailed(){return ve.isInMemoryStorage||ve.get("previous_websocket_failure")===!0}markConnectionHealthy(){ve.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=ui(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(m(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=j(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=pl(i,Fm);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jm))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),Bm=(()=>{class e{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ao,jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=jn&&jn.isAvailable(),r=i&&!jn.previouslyFailed();if(t.webSocketOnly&&(i||et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jn];else{let o=this.transports_=[];for(let a of e.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),zm=6e4,Um=5e3,Vm=10*1024,$m=100*1024,go="t",Fc="d",Wm="s",jc="r",Hm="e",Bc="o",zc="a",Uc="n",Vc="p",qm="h",Mo=class{constructor(n,t,i,r,o,a,s,c,l,d){this.id=n,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kn("c:"+this.id+":"),this.transportManager_=new Bm(t),this.log_("Connection created"),this.start_()}start_(){let n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=n.healthyTimeout||0;r>0&&(this.healthyTimeout_=Vn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$m?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Vm?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return t=>{n===this.conn_?this.onConnectionLost_(t):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return t=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(t):n===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(n){let t={t:"d",d:n};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(go in n){let t=n[go];t===zc?this.upgradeIfSecondaryHealthy_():t===jc?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Bc&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){let t=Fn("t",n),i=Fn("d",n);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vc,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zc,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Uc,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){let t=Fn("t",n),i=Fn("d",n);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){let t=Fn(go,n);if(Fc in n){let i=n[Fc];if(t===qm){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Uc){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Wm?this.onConnectionShutdown_(i):t===jc?this.onReset_(i):t===Hm?So("Server Error: "+i):t===Bc?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):So("Unknown control packet command: "+t)}}onHandshake_(n){let t=n.ts,i=n.v,r=n.h;this.sessionId=n.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Pi!==i&&et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Vn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zm))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,t){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Um))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vc,d:{}}}))}onSecondaryConnectionLost_(){let n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ve.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Oi=class{put(n,t,i,r){}merge(n,t,i,r){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,t,i){}onDisconnectMerge(n,t,i){}onDisconnectCancel(n,t){}reportStats(n){}};var Li=class{constructor(n){this.allowedEvents_=n,this.listeners_={},m(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...t){if(Array.isArray(this.listeners_[n])){let i=[...this.listeners_[n]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(n,t,i){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:t,context:i});let r=this.getInitialEvent(n);r&&t.apply(i,r)}off(n,t,i){this.validateEventType_(n);let r=this.listeners_[n]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(n){m(this.allowedEvents_.find(t=>t===n),"Unknown event: "+n)}};var Fi=class e extends Li{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_r()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(n){return m(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}};var $c=32,Wc=768,R=class{constructor(n,t){if(t===void 0){this.pieces_=n.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=t}toString(){let n="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(n+="/"+this.pieces_[t]);return n||"/"}};function S(){return new R("")}function w(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ne(e){return e.pieces_.length-e.pieceNum_}function k(e){let n=e.pieceNum_;return n<e.pieces_.length&&n++,new R(e.pieces_,n)}function Al(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Gm(e){let n="";for(let t=e.pieceNum_;t<e.pieces_.length;t++)e.pieces_[t]!==""&&(n+="/"+encodeURIComponent(String(e.pieces_[t])));return n||"/"}function Pl(e,n=0){return e.pieces_.slice(e.pieceNum_+n)}function Ml(e){if(e.pieceNum_>=e.pieces_.length)return null;let n=[];for(let t=e.pieceNum_;t<e.pieces_.length-1;t++)n.push(e.pieces_[t]);return new R(n,0)}function L(e,n){let t=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);if(n instanceof R)for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);else{let i=n.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new R(t,0)}function C(e){return e.pieceNum_>=e.pieces_.length}function bt(e,n){let t=w(e),i=w(n);if(t===null)return n;if(t===i)return bt(k(e),k(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")}function Nl(e,n){if(ne(e)!==ne(n))return!1;for(let t=e.pieceNum_,i=n.pieceNum_;t<=e.pieces_.length;t++,i++)if(e.pieces_[t]!==n.pieces_[i])return!1;return!0}function Rt(e,n){let t=e.pieceNum_,i=n.pieceNum_;if(ne(e)>ne(n))return!1;for(;t<e.pieces_.length;){if(e.pieces_[t]!==n.pieces_[i])return!1;++t,++i}return!0}var No=class{constructor(n,t){this.errorPrefix_=t,this.parts_=Pl(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=fn(this.parts_[i]);Ol(this)}};function Qm(e,n){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(n),e.byteLength_+=fn(n),Ol(e)}function Ym(e){let n=e.parts_.pop();e.byteLength_-=fn(n),e.parts_.length>0&&(e.byteLength_-=1)}function Ol(e){if(e.byteLength_>Wc)throw new Error(e.errorPrefix_+"has a key path longer than "+Wc+" bytes ("+e.byteLength_+").");if(e.parts_.length>$c)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$c+") or object contains a cycle "+_e(e))}function _e(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Oo=class e extends Li{constructor(){super(["visible"]);let n,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[n];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(n){return m(n==="visible","Unknown event type: "+n),[this.visible_]}};var Bn=1e3,Km=60*5*1e3,Hc=30*1e3,Zm=1.3,Xm=3e4,Jm="server_kill",qc=3,fa=(()=>{class e extends Oi{constructor(t,i,r,o,a,s,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=s,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=Kn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bn,this.maxReconnectDelay_=Km,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Oo.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Fi.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(j(a)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();let i=new di,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:s=>{let c=s.d;s.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),i.promise}listen(t,i,r,o){this.initConnection_();let a=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+a),this.listens.has(s)||this.listens.set(s,new Map),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(s).has(a),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(s).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let a={p:r},s="q";t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest(s,a,c=>{let l=c.d,d=c.s;e.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,o),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Ot(t,"w")){let r=he(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ws(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Hc)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=ys(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let a=o.s,s=o.d||"error";this.authToken_===t&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,s))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),m(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);let a={p:t},s="n";o&&(a.q=r,a.t=o),this.sendRequest(s,a)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){let a={p:i,d:r};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,s=>{o&&setTimeout(()=>{o(s.s,s.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,a){this.initConnection_();let s={p:i,d:r};a!==void 0&&(s.h=a),this.outstandingPuts_.push({action:t,request:s,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+j(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):So("Unrecognized action received from server: "+j(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Xm&&(this.reconnectDelay_=Bn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Zm)}this.onConnectStatus_(!1)}establishConnection_(){return Da(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,s=!1,c=null,l=function(){c?c.close():(s=!0,r())},d=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,b]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Q("getToken() completed but was canceled"):(Q("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=b&&b.token,c=new Mo(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,f=>{et(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(Jm)},a))}catch(h){this.log_("Failed to get token: "+h),s||(this.repoInfo_.nodeAdmin&&et(h),l())}}})}interrupt(t){Q("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Q("Resuming connection for reason: "+t),delete this.interruptReasons_[t],vr(this.interruptReasons_)&&(this.reconnectDelay_=Bn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(a=>ma(a)).join("$"):r="default";let o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){let r=new R(t).toString(),o;if(this.listens.has(r)){let a=this.listens.get(r);o=a.get(i),a.delete(i),a.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Q("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qc&&(this.reconnectDelay_=Hc,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Q("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qc&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";Nt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+ha.replace(/\./g,"-")]=1,_r()?t["framework.cordova"]=1:vs()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Fi.getInstance().currentlyOnline();return vr(this.interruptReasons_)&&t}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),I=class e{constructor(n,t){this.name=n,this.node=t}static Wrap(n,t){return new e(n,t)}};var nn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,t){let i=new I(en,n),r=new I(en,t);return this.compare(i,r)!==0}minPost(){return I.MIN}};var Ai,ji=class extends nn{static get __EMPTY_NODE(){return Ai}static set __EMPTY_NODE(n){Ai=n}compare(n,t){return cn(n.name,t.name)}isDefinedOn(n){throw Be("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,t){return!1}minPost(){return I.MIN}maxPost(){return new I(Ce,Ai)}makePost(n,t){return m(typeof n=="string","KeyIndex indexValue must always be a string."),new I(n,Ai)}toString(){return".key"}},tn=new ji;var Xe=class{constructor(n,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!n.isEmpty();)if(n=n,a=t?i(n.key,t):1,r&&(a*=-1),a<0)this.isReverse_?n=n.left:n=n.right;else if(a===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(n.key,n.value):t={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}},Tt=(()=>{class e{constructor(t,i,r,o,a){this.key=t,this.value=i,this.color=r??e.RED,this.left=o??gt.EMPTY_NODE,this.right=a??gt.EMPTY_NODE}copy(t,i,r,o,a){return new e(t??this.key,i??this.value,r??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this,a=r(t,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(t,i,r),null):a===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return gt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return gt.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Lo=class{copy(n,t,i,r,o){return this}insert(n,t,i){return new Tt(n,t,null)}remove(n,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},gt=class e{constructor(n,t=e.EMPTY_NODE){this.comparator_=n,this.root_=t}insert(n,t){return new e(this.comparator_,this.root_.insert(n,t,this.comparator_).copy(null,null,Tt.BLACK,null,null))}remove(n){return new e(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Tt.BLACK,null,null))}get(n){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(n,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(n){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(n,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Xe(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,t){return new Xe(this.root_,n,this.comparator_,!1,t)}getReverseIteratorFrom(n,t){return new Xe(this.root_,n,this.comparator_,!0,t)}getReverseIterator(n){return new Xe(this.root_,null,this.comparator_,!0,n)}};gt.EMPTY_NODE=new Lo;function tp(e,n){return cn(e.name,n.name)}function ba(e,n){return cn(e,n)}var Fo;function ep(e){Fo=e}var Ll=function(e){return typeof e=="number"?"number:"+fl(e):"string:"+e},Fl=function(e){if(e.isLeafNode()){let n=e.val();m(typeof n=="string"||typeof n=="number"||typeof n=="object"&&Ot(n,".sv"),"Priority must be a string or number.")}else m(e===Fo||e.isEmpty(),"priority of unexpected type.");m(e===Fo||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Gc,rn=(()=>{class e{constructor(t,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Fl(this.priorityNode_)}static set __childrenNodeConstructor(t){Gc=t}static get __childrenNodeConstructor(){return Gc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return C(t)?this:w(t)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=w(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(m(r!==".priority"||ne(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(k(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ll(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=fl(this.value_):t+=this.value_,this.lazyHash_=hl(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(m(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(i),a=e.VALUE_TYPE_ORDER.indexOf(r);return m(o>=0,"Unknown leaf type: "+i),m(a>=0,"Unknown leaf type: "+r),o===a?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),jl,Bl;function np(e){jl=e}function ip(e){Bl=e}var jo=class extends nn{compare(n,t){let i=n.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return o===0?cn(n.name,t.name):o}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,t){return!n.getPriority().equals(t.getPriority())}minPost(){return I.MIN}maxPost(){return new I(Ce,new rn("[PRIORITY-POST]",Bl))}makePost(n,t){let i=jl(n);return new I(t,new rn("[PRIORITY-POST]",i))}toString(){return".priority"}},Y=new jo;var rp=Math.log(2),Bo=class{constructor(n){let t=o=>parseInt(Math.log(o)/rp,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(n+1),this.current_=this.count-1;let r=i(this.count);this.bits_=n+1&r}nextBitIsOne(){let n=!(this.bits_&1<<this.current_);return this.current_--,n}},Bi=function(e,n,t,i){e.sort(n);let r=function(c,l){let d=l-c,u,h;if(d===0)return null;if(d===1)return u=e[c],h=t?t(u):u,new Tt(h,u.node,Tt.BLACK,null,null);{let b=parseInt(d/2,10)+c,f=r(c,b),T=r(b+1,l);return u=e[b],h=t?t(u):u,new Tt(h,u.node,Tt.BLACK,f,T)}},o=function(c){let l=null,d=null,u=e.length,h=function(f,T){let D=u-f,Ft=u;u-=f;let Te=r(D+1,Ft),Yt=e[D],Rd=t?t(Yt):Yt;b(new Tt(Rd,Yt.node,T,null,Te))},b=function(f){l?(l.left=f,l=f):(d=f,l=f)};for(let f=0;f<c.count;++f){let T=c.nextBitIsOne(),D=Math.pow(2,c.count-(f+1));T?h(D,Tt.BLACK):(h(D,Tt.BLACK),h(D,Tt.RED))}return d},a=new Bo(e.length),s=o(a);return new gt(i||n,s)};var _o,Ze={},on=class e{constructor(n,t){this.indexes_=n,this.indexSet_=t}static get Default(){return m(Ze&&Y,"ChildrenNode.ts has not been loaded"),_o=_o||new e({".priority":Ze},{".priority":Y}),_o}get(n){let t=he(this.indexes_,n);if(!t)throw new Error("No index defined for "+n);return t instanceof gt?t:null}hasIndex(n){return Ot(this.indexSet_,n.toString())}addIndex(n,t){m(n!==tn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=t.getIterator(I.Wrap),a=o.getNext();for(;a;)r=r||n.isDefinedOn(a.node),i.push(a),a=o.getNext();let s;r?s=Bi(i,n.getCompare()):s=Ze;let c=n.toString(),l=Object.assign({},this.indexSet_);l[c]=n;let d=Object.assign({},this.indexes_);return d[c]=s,new e(d,l)}addToIndexes(n,t){let i=pn(this.indexes_,(r,o)=>{let a=he(this.indexSet_,o);if(m(a,"Missing index implementation for "+o),r===Ze)if(a.isDefinedOn(n.node)){let s=[],c=t.getIterator(I.Wrap),l=c.getNext();for(;l;)l.name!==n.name&&s.push(l),l=c.getNext();return s.push(n),Bi(s,a.getCompare())}else return Ze;else{let s=t.get(n.name),c=r;return s&&(c=c.remove(new I(n.name,s))),c.insert(n,n.node)}});return new e(i,this.indexSet_)}removeFromIndexes(n,t){let i=pn(this.indexes_,r=>{if(r===Ze)return r;{let o=t.get(n.name);return o?r.remove(new I(n.name,o)):r}});return new e(i,this.indexSet_)}};var zn,A=(()=>{class e{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fl(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zn||(zn=new e(new gt(ba),null,on.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zn}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?zn:i}}getChild(t){let i=w(t);return i===null?this:this.getImmediateChild(i).getChild(k(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(m(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new I(t,i),o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(r,this.children_));let s=o.isEmpty()?zn:this.priorityNode_;return new e(o,s,a)}}updateChild(t,i){let r=w(t);if(r===null)return i;{m(w(t)!==".priority"||ne(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(k(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,o=0,a=!0;if(this.forEachChild(Y,(s,c)=>{i[s]=c.val(t),r++,a&&e.INTEGER_REGEXP_.test(s)?o=Math.max(o,Number(s)):a=!1}),!t&&a&&o<2*r){let s=[];for(let c in i)s[c]=i[c];return s}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ll(this.getPriority().val())+":"),this.forEachChild(Y,(i,r)=>{let o=r.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":hl(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let o=this.resolveIndex_(r);if(o){let a=o.getPredecessorKey(new I(t,i));return a?a.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new I(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new I(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,I.Wrap),a=o.peek();for(;a!=null&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,I.Wrap),a=o.peek();for(;a!=null&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zn?-1:0}withIndex(t){if(t===tn||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===tn||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Y),o=i.getIterator(Y),a=r.getNext(),s=o.getNext();for(;a&&s;){if(a.name!==s.name||!a.node.equals(s.node))return!1;a=r.getNext(),s=o.getNext()}return a===null&&s===null}else return!1;else return!1}}resolveIndex_(t){return t===tn?null:this.indexMap_.get(t.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),zo=class extends A{constructor(){super(new gt(ba),A.EMPTY_NODE,on.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return A.EMPTY_NODE}isEmpty(){return!1}},Zn=new zo;Object.defineProperties(I,{MIN:{value:new I(en,A.EMPTY_NODE)},MAX:{value:new I(Ce,Zn)}});ji.__EMPTY_NODE=A.EMPTY_NODE;rn.__childrenNodeConstructor=A;ep(Zn);ip(Zn);var op=!0;function W(e,n=null){if(e===null)return A.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(n=e[".priority"]),m(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let t=e;return new rn(t,W(n))}if(!(e instanceof Array)&&op){let t=[],i=!1;if(_t(e,(a,s)=>{if(a.substring(0,1)!=="."){let c=W(s);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new I(a,c)))}}),t.length===0)return A.EMPTY_NODE;let o=Bi(t,tp,a=>a.name,ba);if(i){let a=Bi(t,Y.getCompare());return new A(o,W(n),new on({".priority":a},{".priority":Y}))}else return new A(o,W(n),on.Default)}else{let t=A.EMPTY_NODE;return _t(e,(i,r)=>{if(Ot(e,i)&&i.substring(0,1)!=="."){let o=W(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(W(n))}}np(W);var Uo=class extends nn{constructor(n){super(),this.indexPath_=n,m(!C(n)&&w(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,t){let i=this.extractChild(n.node),r=this.extractChild(t.node),o=i.compareTo(r);return o===0?cn(n.name,t.name):o}makePost(n,t){let i=W(n),r=A.EMPTY_NODE.updateChild(this.indexPath_,i);return new I(t,r)}maxPost(){let n=A.EMPTY_NODE.updateChild(this.indexPath_,Zn);return new I(Ce,n)}toString(){return Pl(this.indexPath_,0).join("/")}};var Vo=class extends nn{compare(n,t){let i=n.node.compareTo(t.node);return i===0?cn(n.name,t.name):i}isDefinedOn(n){return!0}indexedValueChanged(n,t){return!n.equals(t)}minPost(){return I.MIN}maxPost(){return I.MAX}makePost(n,t){let i=W(n);return new I(t,i)}toString(){return".value"}},ap=new Vo;function sp(e){return{type:"value",snapshotNode:e}}function cp(e,n){return{type:"child_added",snapshotNode:n,childName:e}}function lp(e,n){return{type:"child_removed",snapshotNode:n,childName:e}}function Qc(e,n,t){return{type:"child_changed",snapshotNode:n,childName:e,oldSnap:t}}function dp(e,n){return{type:"child_moved",snapshotNode:n,childName:e}}var $o=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Y}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:en}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ce}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Y}copy(){let n=new e;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}};function Yc(e){let n={};if(e.isDefault())return n;let t;if(e.index_===Y?t="$priority":e.index_===ap?t="$value":e.index_===tn?t="$key":(m(e.index_ instanceof Uo,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=j(t),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";n[i]=j(e.indexStartValue_),e.startNameSet_&&(n[i]+=","+j(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";n[i]=j(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+j(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Kc(e){let n={};if(e.startSet_&&(n.sp=e.indexStartValue_,e.startNameSet_&&(n.sn=e.indexStartName_),n.sin=!e.startAfterSet_),e.endSet_&&(n.ep=e.indexEndValue_,e.endNameSet_&&(n.en=e.indexEndName_),n.ein=!e.endBeforeSet_),e.limitSet_){n.l=e.limit_;let t=e.viewFrom_;t===""&&(e.isViewFromLeft()?t="l":t="r"),n.vf=t}return e.index_!==Y&&(n.i=e.index_.toString()),n}var Wo=class e extends Oi{constructor(n,t,i,r){super(),this.repoInfo_=n,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Kn("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,t){return t!==void 0?"tag$"+t:(m(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,t,i,r){let o=n._path.toString();this.log_("Listen called for "+o+" "+n._queryIdentifier);let a=e.getListenId_(n,i),s={};this.listens_[a]=s;let c=Yc(n._queryParams);this.restRequest_(o+".json",c,(l,d)=>{let u=d;if(l===404&&(u=null,l=null),l===null&&this.onDataUpdate_(o,u,!1,i),he(this.listens_,a)===s){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(n,t){let i=e.getListenId_(n,t);delete this.listens_[i]}get(n){let t=Yc(n._queryParams),i=n._path.toString(),r=new di;return this.restRequest_(i+".json",t,(o,a)=>{let s=a;o===404&&(s=null,o=null),o===null?(this.onDataUpdate_(i,s,!1,null),r.resolve(s)):r.reject(new Error(s))}),r.promise}refreshAuthToken(n){}restRequest_(n,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);let a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+Cs(t);this.log_("Sending REST request for "+a);let s=new XMLHttpRequest;s.onreadystatechange=()=>{if(i&&s.readyState===4){this.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);let c=null;if(s.status>=200&&s.status<300){try{c=ui(s.responseText)}catch{et("Failed to parse JSON response for "+a+": "+s.responseText)}i(null,c)}else s.status!==401&&s.status!==404&&et("Got unsuccessful REST response for "+a+" Status: "+s.status),i(s.status);i=null}},s.open("GET",a,!0),s.send()})}};var Ho=class{constructor(){this.rootNode_=A.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,t){this.rootNode_=this.rootNode_.updateChild(n,t)}};function zi(){return{value:null,children:new Map}}function zl(e,n,t){if(C(n))e.value=t,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(n,t);else{let i=w(n);e.children.has(i)||e.children.set(i,zi());let r=e.children.get(i);n=k(n),zl(r,n,t)}}function qo(e,n,t){e.value!==null?t(n,e.value):up(e,(i,r)=>{let o=new R(n.toString()+"/"+i);qo(r,o,t)})}function up(e,n){e.children.forEach((t,i)=>{n(i,t)})}var Go=class{constructor(n){this.collection_=n,this.last_=null}get(){let n=this.collection_.get(),t=Object.assign({},n);return this.last_&&_t(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=n,t}};var Zc=10*1e3,hp=30*1e3,mp=5*60*1e3,Qo=class{constructor(n,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Go(n);let i=Zc+(hp-Zc)*Math.random();Vn(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let n=this.statsListener_.get(),t={},i=!1;_t(n,(r,o)=>{o>0&&Ot(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),Vn(this.reportStats_.bind(this),Math.floor(Math.random()*2*mp))}};var qt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(qt||{});function Ul(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vl(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $l(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var Yo=class e{constructor(n,t,i){this.path=n,this.affectedTree=t,this.revert=i,this.type=qt.ACK_USER_WRITE,this.source=Ul()}operationForChild(n){if(C(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new R(n));return new e(S(),t,this.revert)}}else return m(w(this.path)===n,"operationForChild called for unrelated child."),new e(k(this.path),this.affectedTree,this.revert)}};var an=class e{constructor(n,t,i){this.source=n,this.path=t,this.snap=i,this.type=qt.OVERWRITE}operationForChild(n){return C(this.path)?new e(this.source,S(),this.snap.getImmediateChild(n)):new e(this.source,k(this.path),this.snap)}};var Ui=class e{constructor(n,t,i){this.source=n,this.path=t,this.children=i,this.type=qt.MERGE}operationForChild(n){if(C(this.path)){let t=this.children.subtree(new R(n));return t.isEmpty()?null:t.value?new an(this.source,S(),t.value):new e(this.source,S(),t)}else return m(w(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new e(this.source,k(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var qn=class{constructor(n,t,i){this.node_=n,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(C(n))return this.isFullyInitialized()&&!this.filtered_;let t=w(n);return this.isCompleteForChild(t)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}};function pp(e,n,t,i){let r=[],o=[];return n.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(dp(a.childName,a.snapshotNode))}),Un(e,r,"child_removed",n,i,t),Un(e,r,"child_added",n,i,t),Un(e,r,"child_moved",o,i,t),Un(e,r,"child_changed",n,i,t),Un(e,r,"value",n,i,t),r}function Un(e,n,t,i,r,o){let a=i.filter(s=>s.type===t);a.sort((s,c)=>bp(e,s,c)),a.forEach(s=>{let c=fp(e,s,o);r.forEach(l=>{l.respondsTo(s.type)&&n.push(l.createEvent(c,e.query_))})})}function fp(e,n,t){return n.type==="value"||n.type==="child_removed"||(n.prevName=t.getPredecessorChildName(n.childName,n.snapshotNode,e.index_)),n}function bp(e,n,t){if(n.childName==null||t.childName==null)throw Be("Should only compare child_ events.");let i=new I(n.childName,n.snapshotNode),r=new I(t.childName,t.snapshotNode);return e.index_.compare(i,r)}function Wl(e,n){return{eventCache:e,serverCache:n}}function Wn(e,n,t,i){return Wl(new qn(n,t,i),e.serverCache)}function Hl(e,n,t,i){return Wl(e.eventCache,new qn(n,t,i))}function Ko(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ie(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var vo,gp=()=>(vo||(vo=new gt(gm)),vo),nt=class e{constructor(n,t=gp()){this.value=n,this.children=t}static fromObject(n){let t=new e(null);return _t(n,(i,r)=>{t=t.set(new R(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,t){if(this.value!=null&&t(this.value))return{path:S(),value:this.value};if(C(n))return null;{let i=w(n),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(k(n),t);return o!=null?{path:L(new R(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(C(n))return this;{let t=w(n),i=this.children.get(t);return i!==null?i.subtree(k(n)):new e(null)}}set(n,t){if(C(n))return new e(t,this.children);{let i=w(n),o=(this.children.get(i)||new e(null)).set(k(n),t),a=this.children.insert(i,o);return new e(this.value,a)}}remove(n){if(C(n))return this.children.isEmpty()?new e(null):new e(null,this.children);{let t=w(n),i=this.children.get(t);if(i){let r=i.remove(k(n)),o;return r.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,r),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(n){if(C(n))return this.value;{let t=w(n),i=this.children.get(t);return i?i.get(k(n)):null}}setTree(n,t){if(C(n))return t;{let i=w(n),o=(this.children.get(i)||new e(null)).setTree(k(n),t),a;return o.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,o),new e(this.value,a)}}fold(n){return this.fold_(S(),n)}fold_(n,t){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(L(n,r),t)}),t(n,this.value,i)}findOnPath(n,t){return this.findOnPath_(n,S(),t)}findOnPath_(n,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(C(n))return null;{let o=w(n),a=this.children.get(o);return a?a.findOnPath_(k(n),L(t,o),i):null}}foreachOnPath(n,t){return this.foreachOnPath_(n,S(),t)}foreachOnPath_(n,t,i){if(C(n))return this;{this.value&&i(t,this.value);let r=w(n),o=this.children.get(r);return o?o.foreachOnPath_(k(n),L(t,r),i):new e(null)}}foreach(n){this.foreach_(S(),n)}foreach_(n,t){this.children.inorderTraversal((i,r)=>{r.foreach_(L(n,i),t)}),this.value&&t(n,this.value)}foreachChild(n){this.children.inorderTraversal((t,i)=>{i.value&&n(t,i.value)})}};var Et=class e{constructor(n){this.writeTree_=n}static empty(){return new e(new nt(null))}};function Hn(e,n,t){if(C(n))return new Et(new nt(t));{let i=e.writeTree_.findRootMostValueAndPath(n);if(i!=null){let r=i.path,o=i.value,a=bt(r,n);return o=o.updateChild(a,t),new Et(e.writeTree_.set(r,o))}else{let r=new nt(t),o=e.writeTree_.setTree(n,r);return new Et(o)}}}function Xc(e,n,t){let i=e;return _t(t,(r,o)=>{i=Hn(i,L(n,r),o)}),i}function Jc(e,n){if(C(n))return Et.empty();{let t=e.writeTree_.setTree(n,new nt(null));return new Et(t)}}function Zo(e,n){return Se(e,n)!=null}function Se(e,n){let t=e.writeTree_.findRootMostValueAndPath(n);return t!=null?e.writeTree_.get(t.path).getChild(bt(t.path,n)):null}function tl(e){let n=[],t=e.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Y,(i,r)=>{n.push(new I(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&n.push(new I(i,r.value))}),n}function ee(e,n){if(C(n))return e;{let t=Se(e,n);return t!=null?new Et(new nt(t)):new Et(e.writeTree_.subtree(n))}}function Xo(e){return e.writeTree_.isEmpty()}function sn(e,n){return ql(S(),e.writeTree_,n)}function ql(e,n,t){if(n.value!=null)return t.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal((r,o)=>{r===".priority"?(m(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=ql(L(e,r),o,t)}),!t.getChild(e).isEmpty()&&i!==null&&(t=t.updateChild(L(e,".priority"),i)),t}}function Gl(e,n){return Xl(n,e)}function _p(e,n,t,i,r){m(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:n,snap:t,writeId:i,visible:r}),r&&(e.visibleWrites=Hn(e.visibleWrites,n,t)),e.lastWriteId=i}function vp(e,n){for(let t=0;t<e.allWrites.length;t++){let i=e.allWrites[t];if(i.writeId===n)return i}return null}function yp(e,n){let t=e.allWrites.findIndex(s=>s.writeId===n);m(t>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[t];e.allWrites.splice(t,1);let r=i.visible,o=!1,a=e.allWrites.length-1;for(;r&&a>=0;){let s=e.allWrites[a];s.visible&&(a>=t&&wp(s,i.path)?r=!1:Rt(i.path,s.path)&&(o=!0)),a--}if(r){if(o)return Cp(e),!0;if(i.snap)e.visibleWrites=Jc(e.visibleWrites,i.path);else{let s=i.children;_t(s,c=>{e.visibleWrites=Jc(e.visibleWrites,L(i.path,c))})}return!0}else return!1}function wp(e,n){if(e.snap)return Rt(e.path,n);for(let t in e.children)if(e.children.hasOwnProperty(t)&&Rt(L(e.path,t),n))return!0;return!1}function Cp(e){e.visibleWrites=Ql(e.allWrites,Ip,S()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ip(e){return e.visible}function Ql(e,n,t){let i=Et.empty();for(let r=0;r<e.length;++r){let o=e[r];if(n(o)){let a=o.path,s;if(o.snap)Rt(t,a)?(s=bt(t,a),i=Hn(i,s,o.snap)):Rt(a,t)&&(s=bt(a,t),i=Hn(i,S(),o.snap.getChild(s)));else if(o.children){if(Rt(t,a))s=bt(t,a),i=Xc(i,s,o.children);else if(Rt(a,t))if(s=bt(a,t),C(s))i=Xc(i,S(),o.children);else{let c=he(o.children,w(s));if(c){let l=c.getChild(k(s));i=Hn(i,S(),l)}}}else throw Be("WriteRecord should have .snap or .children")}}return i}function Yl(e,n,t,i,r){if(!i&&!r){let o=Se(e.visibleWrites,n);if(o!=null)return o;{let a=ee(e.visibleWrites,n);if(Xo(a))return t;if(t==null&&!Zo(a,S()))return null;{let s=t||A.EMPTY_NODE;return sn(a,s)}}}else{let o=ee(e.visibleWrites,n);if(!r&&Xo(o))return t;if(!r&&t==null&&!Zo(o,S()))return null;{let a=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Rt(l.path,n)||Rt(n,l.path))},s=Ql(e.allWrites,a,n),c=t||A.EMPTY_NODE;return sn(s,c)}}}function xp(e,n,t){let i=A.EMPTY_NODE,r=Se(e.visibleWrites,n);if(r)return r.isLeafNode()||r.forEachChild(Y,(o,a)=>{i=i.updateImmediateChild(o,a)}),i;if(t){let o=ee(e.visibleWrites,n);return t.forEachChild(Y,(a,s)=>{let c=sn(ee(o,new R(a)),s);i=i.updateImmediateChild(a,c)}),tl(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{let o=ee(e.visibleWrites,n);return tl(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function Sp(e,n,t,i,r){m(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=L(n,t);if(Zo(e.visibleWrites,o))return null;{let a=ee(e.visibleWrites,o);return Xo(a)?r.getChild(t):sn(a,r.getChild(t))}}function Tp(e,n,t,i){let r=L(n,t),o=Se(e.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(t)){let a=ee(e.visibleWrites,r);return sn(a,i.getNode().getImmediateChild(t))}else return null}function Rp(e,n){return Se(e.visibleWrites,n)}function Ep(e,n,t,i,r,o,a){let s,c=ee(e.visibleWrites,n),l=Se(c,S());if(l!=null)s=l;else if(t!=null)s=sn(c,t);else return[];if(s=s.withIndex(a),!s.isEmpty()&&!s.isLeafNode()){let d=[],u=a.getCompare(),h=o?s.getReverseIteratorFrom(i,a):s.getIteratorFrom(i,a),b=h.getNext();for(;b&&d.length<r;)u(b,i)!==0&&d.push(b),b=h.getNext();return d}else return[]}function kp(){return{visibleWrites:Et.empty(),allWrites:[],lastWriteId:-1}}function Jo(e,n,t,i){return Yl(e.writeTree,e.treePath,n,t,i)}function Kl(e,n){return xp(e.writeTree,e.treePath,n)}function el(e,n,t,i){return Sp(e.writeTree,e.treePath,n,t,i)}function Vi(e,n){return Rp(e.writeTree,L(e.treePath,n))}function Dp(e,n,t,i,r,o){return Ep(e.writeTree,e.treePath,n,t,i,r,o)}function ga(e,n,t){return Tp(e.writeTree,e.treePath,n,t)}function Zl(e,n){return Xl(L(e.treePath,n),e.writeTree)}function Xl(e,n){return{treePath:e,writeTree:n}}var ta=class{constructor(){this.changeMap=new Map}trackChildChange(n){let t=n.type,i=n.childName;m(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),m(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,Qc(i,n.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,lp(i,r.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,cp(i,n.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,Qc(i,n.snapshotNode,r.oldSnap));else throw Be("Illegal combination of changes: "+n+" occurred after "+r)}else this.changeMap.set(i,n)}getChanges(){return Array.from(this.changeMap.values())}};var ea=class{getCompleteChild(n){return null}getChildAfterChild(n,t,i){return null}},Jl=new ea,Gn=class{constructor(n,t,i=null){this.writes_=n,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(n){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(n))return t.getNode().getImmediateChild(n);{let i=this.optCompleteServerCache_!=null?new qn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ga(this.writes_,n,i)}}getChildAfterChild(n,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ie(this.viewCache_),o=Dp(this.writes_,r,t,1,i,n);return o.length===0?null:o[0]}};function Ap(e,n){m(n.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),m(n.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Pp(e,n,t,i,r){let o=new ta,a,s;if(t.type===qt.OVERWRITE){let l=t;l.source.fromUser?a=na(e,n,l.path,l.snap,i,r,o):(m(l.source.fromServer,"Unknown source."),s=l.source.tagged||n.serverCache.isFiltered()&&!C(l.path),a=$i(e,n,l.path,l.snap,i,r,s,o))}else if(t.type===qt.MERGE){let l=t;l.source.fromUser?a=Np(e,n,l.path,l.children,i,r,o):(m(l.source.fromServer,"Unknown source."),s=l.source.tagged||n.serverCache.isFiltered(),a=ia(e,n,l.path,l.children,i,r,s,o))}else if(t.type===qt.ACK_USER_WRITE){let l=t;l.revert?a=Fp(e,n,l.path,i,r,o):a=Op(e,n,l.path,l.affectedTree,i,r,o)}else if(t.type===qt.LISTEN_COMPLETE)a=Lp(e,n,t.path,i,o);else throw Be("Unknown operation type: "+t.type);let c=o.getChanges();return Mp(n,a,c),{viewCache:a,changes:c}}function Mp(e,n,t){let i=n.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Ko(e);(t.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(sp(Ko(n)))}}function td(e,n,t,i,r,o){let a=n.eventCache;if(Vi(i,t)!=null)return n;{let s,c;if(C(t))if(m(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){let l=Ie(n),d=l instanceof A?l:A.EMPTY_NODE,u=Kl(i,d);s=e.filter.updateFullNode(n.eventCache.getNode(),u,o)}else{let l=Jo(i,Ie(n));s=e.filter.updateFullNode(n.eventCache.getNode(),l,o)}else{let l=w(t);if(l===".priority"){m(ne(t)===1,"Can't have a priority with additional path components");let d=a.getNode();c=n.serverCache.getNode();let u=el(i,t,d,c);u!=null?s=e.filter.updatePriority(d,u):s=a.getNode()}else{let d=k(t),u;if(a.isCompleteForChild(l)){c=n.serverCache.getNode();let h=el(i,t,a.getNode(),c);h!=null?u=a.getNode().getImmediateChild(l).updateChild(d,h):u=a.getNode().getImmediateChild(l)}else u=ga(i,l,n.serverCache);u!=null?s=e.filter.updateChild(a.getNode(),l,u,d,r,o):s=a.getNode()}}return Wn(n,s,a.isFullyInitialized()||C(t),e.filter.filtersNodes())}}function $i(e,n,t,i,r,o,a,s){let c=n.serverCache,l,d=a?e.filter:e.filter.getIndexedFilter();if(C(t))l=d.updateFullNode(c.getNode(),i,null);else if(d.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(t,i);l=d.updateFullNode(c.getNode(),b,null)}else{let b=w(t);if(!c.isCompleteForPath(t)&&ne(t)>1)return n;let f=k(t),D=c.getNode().getImmediateChild(b).updateChild(f,i);b===".priority"?l=d.updatePriority(c.getNode(),D):l=d.updateChild(c.getNode(),b,D,f,Jl,null)}let u=Hl(n,l,c.isFullyInitialized()||C(t),d.filtersNodes()),h=new Gn(r,u,o);return td(e,u,t,r,h,s)}function na(e,n,t,i,r,o,a){let s=n.eventCache,c,l,d=new Gn(r,n,o);if(C(t))l=e.filter.updateFullNode(n.eventCache.getNode(),i,a),c=Wn(n,l,!0,e.filter.filtersNodes());else{let u=w(t);if(u===".priority")l=e.filter.updatePriority(n.eventCache.getNode(),i),c=Wn(n,l,s.isFullyInitialized(),s.isFiltered());else{let h=k(t),b=s.getNode().getImmediateChild(u),f;if(C(h))f=i;else{let T=d.getCompleteChild(u);T!=null?Al(h)===".priority"&&T.getChild(Ml(h)).isEmpty()?f=T:f=T.updateChild(h,i):f=A.EMPTY_NODE}if(b.equals(f))c=n;else{let T=e.filter.updateChild(s.getNode(),u,f,h,d,a);c=Wn(n,T,s.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function nl(e,n){return e.eventCache.isCompleteForChild(n)}function Np(e,n,t,i,r,o,a){let s=n;return i.foreach((c,l)=>{let d=L(t,c);nl(n,w(d))&&(s=na(e,s,d,l,r,o,a))}),i.foreach((c,l)=>{let d=L(t,c);nl(n,w(d))||(s=na(e,s,d,l,r,o,a))}),s}function il(e,n,t){return t.foreach((i,r)=>{n=n.updateChild(i,r)}),n}function ia(e,n,t,i,r,o,a,s){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let c=n,l;C(t)?l=i:l=new nt(null).setTree(t,i);let d=n.serverCache.getNode();return l.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let b=n.serverCache.getNode().getImmediateChild(u),f=il(e,b,h);c=$i(e,c,new R(u),f,r,o,a,s)}}),l.children.inorderTraversal((u,h)=>{let b=!n.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!b){let f=n.serverCache.getNode().getImmediateChild(u),T=il(e,f,h);c=$i(e,c,new R(u),T,r,o,a,s)}}),c}function Op(e,n,t,i,r,o,a){if(Vi(r,t)!=null)return n;let s=n.serverCache.isFiltered(),c=n.serverCache;if(i.value!=null){if(C(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return $i(e,n,t,c.getNode().getChild(t),r,o,s,a);if(C(t)){let l=new nt(null);return c.getNode().forEachChild(tn,(d,u)=>{l=l.set(new R(d),u)}),ia(e,n,t,l,r,o,s,a)}else return n}else{let l=new nt(null);return i.foreach((d,u)=>{let h=L(t,d);c.isCompleteForPath(h)&&(l=l.set(d,c.getNode().getChild(h)))}),ia(e,n,t,l,r,o,s,a)}}function Lp(e,n,t,i,r){let o=n.serverCache,a=Hl(n,o.getNode(),o.isFullyInitialized()||C(t),o.isFiltered());return td(e,a,t,i,Jl,r)}function Fp(e,n,t,i,r,o){let a;if(Vi(i,t)!=null)return n;{let s=new Gn(i,n,r),c=n.eventCache.getNode(),l;if(C(t)||w(t)===".priority"){let d;if(n.serverCache.isFullyInitialized())d=Jo(i,Ie(n));else{let u=n.serverCache.getNode();m(u instanceof A,"serverChildren would be complete if leaf node"),d=Kl(i,u)}d=d,l=e.filter.updateFullNode(c,d,o)}else{let d=w(t),u=ga(i,d,n.serverCache);u==null&&n.serverCache.isCompleteForChild(d)&&(u=c.getImmediateChild(d)),u!=null?l=e.filter.updateChild(c,d,u,k(t),s,o):n.eventCache.getNode().hasChild(d)?l=e.filter.updateChild(c,d,A.EMPTY_NODE,k(t),s,o):l=c,l.isEmpty()&&n.serverCache.isFullyInitialized()&&(a=Jo(i,Ie(n)),a.isLeafNode()&&(l=e.filter.updateFullNode(l,a,o)))}return a=n.serverCache.isFullyInitialized()||Vi(i,S())!=null,Wn(n,l,a,e.filter.filtersNodes())}}function jp(e,n){let t=Ie(e.viewCache_);return t&&(e.query._queryParams.loadsAllData()||!C(n)&&!t.getImmediateChild(w(n)).isEmpty())?t.getChild(n):null}function rl(e,n,t,i){n.type===qt.MERGE&&n.source.queryId!==null&&(m(Ie(e.viewCache_),"We should always have a full cache before handling merges"),m(Ko(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,o=Pp(e.processor_,r,n,t,i);return Ap(e.processor_,o.viewCache),m(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Bp(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Bp(e,n,t,i){let r=i?[i]:e.eventRegistrations_;return pp(e.eventGenerator_,n,t,r)}var ol;function zp(e){m(!ol,"__referenceConstructor has already been defined"),ol=e}function _a(e,n,t,i){let r=n.source.queryId;if(r!==null){let o=e.views.get(r);return m(o!=null,"SyncTree gave us an op for an invalid query."),rl(o,n,t,i)}else{let o=[];for(let a of e.views.values())o=o.concat(rl(a,n,t,i));return o}}function va(e,n){let t=null;for(let i of e.views.values())t=t||jp(i,n);return t}var al;function Up(e){m(!al,"__referenceConstructor has already been defined"),al=e}var Wi=class{constructor(n){this.listenProvider_=n,this.syncPointTree_=new nt(null),this.pendingWriteTree_=kp(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ed(e,n,t,i,r){return _p(e.pendingWriteTree_,n,t,i,r),r?qi(e,new an(Ul(),n,t)):[]}function ye(e,n,t=!1){let i=vp(e.pendingWriteTree_,n);if(yp(e.pendingWriteTree_,n)){let o=new nt(null);return i.snap!=null?o=o.set(S(),!0):_t(i.children,a=>{o=o.set(new R(a),!0)}),qi(e,new Yo(i.path,o,t))}else return[]}function Hi(e,n,t){return qi(e,new an(Vl(),n,t))}function Vp(e,n,t){let i=nt.fromObject(t);return qi(e,new Ui(Vl(),n,i))}function $p(e,n,t,i){let r=rd(e,i);if(r!=null){let o=od(r),a=o.path,s=o.queryId,c=bt(a,n),l=new an($l(s),c,t);return ad(e,a,l)}else return[]}function Wp(e,n,t,i){let r=rd(e,i);if(r){let o=od(r),a=o.path,s=o.queryId,c=bt(a,n),l=nt.fromObject(t),d=new Ui($l(s),c,l);return ad(e,a,d)}else return[]}function ya(e,n,t){let r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(n,(a,s)=>{let c=bt(a,n),l=va(s,c);if(l)return l});return Yl(r,n,o,t,!0)}function qi(e,n){return nd(n,e.syncPointTree_,null,Gl(e.pendingWriteTree_,S()))}function nd(e,n,t,i){if(C(e.path))return id(e,n,t,i);{let r=n.get(S());t==null&&r!=null&&(t=va(r,S()));let o=[],a=w(e.path),s=e.operationForChild(a),c=n.children.get(a);if(c&&s){let l=t?t.getImmediateChild(a):null,d=Zl(i,a);o=o.concat(nd(s,c,l,d))}return r&&(o=o.concat(_a(r,e,i,t))),o}}function id(e,n,t,i){let r=n.get(S());t==null&&r!=null&&(t=va(r,S()));let o=[];return n.children.inorderTraversal((a,s)=>{let c=t?t.getImmediateChild(a):null,l=Zl(i,a),d=e.operationForChild(a);d&&(o=o.concat(id(d,s,c,l)))}),r&&(o=o.concat(_a(r,e,i,t))),o}function rd(e,n){return e.tagToQueryMap.get(n)}function od(e){let n=e.indexOf("$");return m(n!==-1&&n<e.length-1,"Bad queryKey."),{queryId:e.substr(n+1),path:new R(e.substr(0,n))}}function ad(e,n,t){let i=e.syncPointTree_.get(n);m(i,"Missing sync point for query tag that we're tracking");let r=Gl(e.pendingWriteTree_,n);return _a(i,t,r,null)}var ra=class e{constructor(n){this.node_=n}getImmediateChild(n){let t=this.node_.getImmediateChild(n);return new e(t)}node(){return this.node_}},oa=class e{constructor(n,t){this.syncTree_=n,this.path_=t}getImmediateChild(n){let t=L(this.path_,n);return new e(this.syncTree_,t)}node(){return ya(this.syncTree_,this.path_)}},Hp=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},sl=function(e,n,t){if(!e||typeof e!="object")return e;if(m(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return qp(e[".sv"],n,t);if(typeof e[".sv"]=="object")return Gp(e[".sv"],n);m(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},qp=function(e,n,t){switch(e){case"timestamp":return t.timestamp;default:m(!1,"Unexpected server value: "+e)}},Gp=function(e,n,t){e.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&m(!1,"Unexpected increment value: "+i);let r=n.node();if(m(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let a=r.getValue();return typeof a!="number"?i:a+i},Qp=function(e,n,t,i){return wa(n,new oa(t,e),i)},sd=function(e,n,t){return wa(e,new ra(n),t)};function wa(e,n,t){let i=e.getPriority().val(),r=sl(i,n.getImmediateChild(".priority"),t),o;if(e.isLeafNode()){let a=e,s=sl(a.getValue(),n,t);return s!==a.getValue()||r!==a.getPriority().val()?new rn(s,W(r)):e}else{let a=e;return o=a,r!==a.getPriority().val()&&(o=o.updatePriority(new rn(r))),a.forEachChild(Y,(s,c)=>{let l=wa(c,n.getImmediateChild(s),t);l!==c&&(o=o.updateImmediateChild(s,l))}),o}}var Qn=class{constructor(n="",t=null,i={children:{},childCount:0}){this.name=n,this.parent=t,this.node=i}};function Ca(e,n){let t=n instanceof R?n:new R(n),i=e,r=w(t);for(;r!==null;){let o=he(i.node.children,r)||{children:{},childCount:0};i=new Qn(r,i,o),t=k(t),r=w(t)}return i}function dn(e){return e.node.value}function cd(e,n){e.node.value=n,aa(e)}function ld(e){return e.node.childCount>0}function Yp(e){return dn(e)===void 0&&!ld(e)}function Gi(e,n){_t(e.node.children,(t,i)=>{n(new Qn(t,e,i))})}function dd(e,n,t,i){t&&!i&&n(e),Gi(e,r=>{dd(r,n,!0,i)}),t&&i&&n(e)}function Kp(e,n,t){let i=t?e:e.parent;for(;i!==null;){if(n(i))return!0;i=i.parent}return!1}function Xn(e){return new R(e.parent===null?e.name:Xn(e.parent)+"/"+e.name)}function aa(e){e.parent!==null&&Zp(e.parent,e.name,e)}function Zp(e,n,t){let i=Yp(t),r=Ot(e.node.children,n);i&&r?(delete e.node.children[n],e.node.childCount--,aa(e)):!i&&!r&&(e.node.children[n]=t.node,e.node.childCount++,aa(e))}var Xp=/[\[\].#$\/\u0000-\u001F\u007F]/,Jp=/[\[\].#$\u0000-\u001F\u007F]/,yo=10*1024*1024,ud=function(e){return typeof e=="string"&&e.length!==0&&!Xp.test(e)},hd=function(e){return typeof e=="string"&&e.length!==0&&!Jp.test(e)},tf=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),hd(e)};var ef=function(e,n,t,i){i&&n===void 0||Ia(hi(e,"value"),n,t)},Ia=function(e,n,t){let i=t instanceof R?new No(t,e):t;if(n===void 0)throw new Error(e+"contains undefined "+_e(i));if(typeof n=="function")throw new Error(e+"contains a function "+_e(i)+" with contents = "+n.toString());if(ml(n))throw new Error(e+"contains "+n.toString()+" "+_e(i));if(typeof n=="string"&&n.length>yo/3&&fn(n)>yo)throw new Error(e+"contains a string greater than "+yo+" utf8 bytes "+_e(i)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let r=!1,o=!1;if(_t(n,(a,s)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!ud(a)))throw new Error(e+" contains an invalid key ("+a+") "+_e(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Qm(i,a),Ia(e,s,i),Ym(i)}),r&&o)throw new Error(e+' contains ".value" child '+_e(i)+" in addition to actual children.")}};var md=function(e,n,t,i){if(!(i&&t===void 0)&&!hd(t))throw new Error(hi(e,n)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nf=function(e,n,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),md(e,n,t,i)},rf=function(e,n){if(w(n)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},of=function(e,n){let t=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!ud(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!tf(t))throw new Error(hi(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var sa=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function pd(e,n){let t=null;for(let i=0;i<n.length;i++){let r=n[i],o=r.getPath();t!==null&&!Nl(o,t.path)&&(e.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(r)}t&&e.eventLists_.push(t)}function Qt(e,n,t){pd(e,t),af(e,i=>Rt(i,n)||Rt(n,i))}function af(e,n){e.recursionDepth_++;let t=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let o=r.path;n(o)?(sf(e.eventLists_[i]),e.eventLists_[i]=null):t=!1}}t&&(e.eventLists_=[]),e.recursionDepth_--}function sf(e){for(let n=0;n<e.events.length;n++){let t=e.events[n];if(t!==null){e.events[n]=null;let i=t.getEventRunner();we&&Q("event: "+t.toString()),ln(i)}}}var cf="repo_interrupt",lf=25,ca=class{constructor(n,t,i,r){this.repoInfo_=n,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zi(),this.transactionQueueTree_=new Qn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function df(e,n,t){if(e.stats_=pa(e.repoInfo_),e.forceRestClient_||Im())e.server_=new Wo(e.repoInfo_,(i,r,o,a)=>{cl(e,i,r,o,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ll(e,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{j(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new fa(e.repoInfo_,n,(i,r,o,a)=>{cl(e,i,r,o,a)},i=>{ll(e,i)},i=>{hf(e,i)},e.authTokenProvider_,e.appCheckProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=Sm(e.repoInfo_,()=>new Qo(e.stats_,e.server_)),e.infoData_=new Ho,e.infoSyncTree_=new Wi({startListening:(i,r,o,a)=>{let s=[],c=e.infoData_.getNode(i._path);return c.isEmpty()||(s=Hi(e.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),s},stopListening:()=>{}}),Sa(e,"connected",!1),e.serverSyncTree_=new Wi({startListening:(i,r,o,a)=>(e.server_.listen(i,o,r,(s,c)=>{let l=a(s,c);Qt(e.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function uf(e){let t=e.infoData_.getNode(new R(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function xa(e){return Hp({timestamp:uf(e)})}function cl(e,n,t,i,r){e.dataUpdateCount++;let o=new R(n);t=e.interceptServerDataCallback_?e.interceptServerDataCallback_(n,t):t;let a=[];if(r)if(i){let c=pn(t,l=>W(l));a=Wp(e.serverSyncTree_,o,c,r)}else{let c=W(t);a=$p(e.serverSyncTree_,o,c,r)}else if(i){let c=pn(t,l=>W(l));a=Vp(e.serverSyncTree_,o,c)}else{let c=W(t);a=Hi(e.serverSyncTree_,o,c)}let s=o;a.length>0&&(s=Qi(e,o)),Qt(e.eventQueue_,s,a)}function ll(e,n){Sa(e,"connected",n),n===!1&&pf(e)}function hf(e,n){_t(n,(t,i)=>{Sa(e,t,i)})}function Sa(e,n,t){let i=new R("/.info/"+n),r=W(t);e.infoData_.updateSnapshot(i,r);let o=Hi(e.infoSyncTree_,i,r);Qt(e.eventQueue_,i,o)}function fd(e){return e.nextWriteId_++}function mf(e,n,t,i,r){Ta(e,"set",{path:n.toString(),value:t,priority:i});let o=xa(e),a=W(t,i),s=ya(e.serverSyncTree_,n),c=sd(a,s,o),l=fd(e),d=ed(e.serverSyncTree_,n,c,l,!0);pd(e.eventQueue_,d),e.server_.put(n.toString(),a.val(!0),(h,b)=>{let f=h==="ok";f||et("set at "+n+" failed: "+h);let T=ye(e.serverSyncTree_,l,!f);Qt(e.eventQueue_,n,T),bf(e,r,h,b)});let u=yd(e,n);Qi(e,u),Qt(e.eventQueue_,u,[])}function pf(e){Ta(e,"onDisconnectEvents");let n=xa(e),t=zi();qo(e.onDisconnect_,S(),(r,o)=>{let a=Qp(r,o,e.serverSyncTree_,n);zl(t,r,a)});let i=[];qo(t,S(),(r,o)=>{i=i.concat(Hi(e.serverSyncTree_,r,o));let a=yd(e,r);Qi(e,a)}),e.onDisconnect_=zi(),Qt(e.eventQueue_,S(),i)}function ff(e){e.persistentConnection_&&e.persistentConnection_.interrupt(cf)}function Ta(e,...n){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":"),Q(t,...n)}function bf(e,n,t,i){n&&ln(()=>{if(t==="ok")n(null);else{let r=(t||"error").toUpperCase(),o=r;i&&(o+=": "+i);let a=new Error(o);a.code=r,n(a)}})}function bd(e,n,t){return ya(e.serverSyncTree_,n,t)||A.EMPTY_NODE}function Ra(e,n=e.transactionQueueTree_){if(n||Yi(e,n),dn(n)){let t=_d(e,n);m(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&gf(e,Xn(n),t)}else ld(n)&&Gi(n,t=>{Ra(e,t)})}function gf(e,n,t){let i=t.map(l=>l.currentWriteId),r=bd(e,n,i),o=r,a=r.hash();for(let l=0;l<t.length;l++){let d=t[l];m(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=bt(n,d.path);o=o.updateChild(u,d.currentOutputSnapshotRaw)}let s=o.val(!0),c=n;e.server_.put(c.toString(),s,l=>{Ta(e,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let u=[];for(let h=0;h<t.length;h++)t[h].status=2,d=d.concat(ye(e.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&u.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Yi(e,Ca(e.transactionQueueTree_,n)),Ra(e,e.transactionQueueTree_),Qt(e.eventQueue_,n,d);for(let h=0;h<u.length;h++)ln(u[h])}else{if(l==="datastale")for(let u=0;u<t.length;u++)t[u].status===3?t[u].status=4:t[u].status=0;else{et("transaction at "+c.toString()+" failed: "+l);for(let u=0;u<t.length;u++)t[u].status=4,t[u].abortReason=l}Qi(e,n)}},a)}function Qi(e,n){let t=gd(e,n),i=Xn(t),r=_d(e,t);return _f(e,r,i),i}function _f(e,n,t){if(n.length===0)return;let i=[],r=[],a=n.filter(s=>s.status===0).map(s=>s.currentWriteId);for(let s=0;s<n.length;s++){let c=n[s],l=bt(t,c.path),d=!1,u;if(m(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,u=c.abortReason,r=r.concat(ye(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=lf)d=!0,u="maxretry",r=r.concat(ye(e.serverSyncTree_,c.currentWriteId,!0));else{let h=bd(e,c.path,a);c.currentInputSnapshot=h;let b=n[s].update(h.val());if(b!==void 0){Ia("transaction failed: Data returned ",b,c.path);let f=W(b);typeof b=="object"&&b!=null&&Ot(b,".priority")||(f=f.updatePriority(h.getPriority()));let D=c.currentWriteId,Ft=xa(e),Te=sd(f,h,Ft);c.currentOutputSnapshotRaw=f,c.currentOutputSnapshotResolved=Te,c.currentWriteId=fd(e),a.splice(a.indexOf(D),1),r=r.concat(ed(e.serverSyncTree_,c.path,Te,c.currentWriteId,c.applyLocally)),r=r.concat(ye(e.serverSyncTree_,D,!0))}else d=!0,u="nodata",r=r.concat(ye(e.serverSyncTree_,c.currentWriteId,!0))}Qt(e.eventQueue_,t,r),r=[],d&&(n[s].status=2,function(h){setTimeout(h,Math.floor(0))}(n[s].unwatcher),n[s].onComplete&&(u==="nodata"?i.push(()=>n[s].onComplete(null,!1,n[s].currentInputSnapshot)):i.push(()=>n[s].onComplete(new Error(u),!1,null))))}Yi(e,e.transactionQueueTree_);for(let s=0;s<i.length;s++)ln(i[s]);Ra(e,e.transactionQueueTree_)}function gd(e,n){let t,i=e.transactionQueueTree_;for(t=w(n);t!==null&&dn(i)===void 0;)i=Ca(i,t),n=k(n),t=w(n);return i}function _d(e,n){let t=[];return vd(e,n,t),t.sort((i,r)=>i.order-r.order),t}function vd(e,n,t){let i=dn(n);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Gi(n,r=>{vd(e,r,t)})}function Yi(e,n){let t=dn(n);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,cd(n,t.length>0?t:void 0)}Gi(n,i=>{Yi(e,i)})}function yd(e,n){let t=Xn(gd(e,n)),i=Ca(e.transactionQueueTree_,n);return Kp(i,r=>{wo(e,r)}),wo(e,i),dd(i,r=>{wo(e,r)}),t}function wo(e,n){let t=dn(n);if(t){let i=[],r=[],o=-1;for(let a=0;a<t.length;a++)t[a].status===3||(t[a].status===1?(m(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=3,t[a].abortReason="set"):(m(t[a].status===0,"Unexpected transaction status in abort"),t[a].unwatcher(),r=r.concat(ye(e.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?cd(n,void 0):t.length=o+1,Qt(e.eventQueue_,Xn(n),r);for(let a=0;a<i.length;a++)ln(i[a])}}function vf(e){let n="",t=e.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}n+="/"+r}return n}function yf(e){let n={};e.charAt(0)==="?"&&(e=e.substring(1));for(let t of e.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):et(`Invalid query segment '${t}' in query '${e}'`)}return n}var dl=function(e,n){let t=wf(e),i=t.namespace;t.domain==="firebase.com"&&Gt(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||fm();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Mi(t.host,t.secure,i,r,n,"",i!==t.subdomain),path:new R(t.pathString)}},wf=function(e){let n="",t="",i="",r="",o="",a=!0,s="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));let d=e.indexOf("/");d===-1&&(d=e.length);let u=e.indexOf("?");u===-1&&(u=e.length),n=e.substring(0,Math.min(d,u)),d<u&&(r=vf(e.substring(d,u)));let h=yf(e.substring(Math.min(e.length,u)));l=n.indexOf(":"),l>=0?(a=s==="https"||s==="wss",c=parseInt(n.substring(l+1),10)):l=n.length;let b=n.slice(0,l);if(b.toLowerCase()==="localhost")t="localhost";else if(b.split(".").length<=2)t=b;else{let f=n.indexOf(".");i=n.substring(0,f).toLowerCase(),t=n.substring(f+1),o=i}"ns"in h&&(o=h.ns)}return{host:n,port:c,domain:t,subdomain:i,secure:a,scheme:s,pathString:r,namespace:o}};var la=class e{constructor(n,t,i,r){this._repo=n,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return C(this._path)?null:Al(this._path)}get ref(){return new xe(this._repo,this._path)}get _queryIdentifier(){let n=Kc(this._queryParams),t=ma(n);return t==="{}"?"default":t}get _queryObject(){return Kc(this._queryParams)}isEqual(n){if(n=ze(n),!(n instanceof e))return!1;let t=this._repo===n._repo,i=Nl(this._path,n._path),r=this._queryIdentifier===n._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Gm(this._path)}};var xe=class e extends la{constructor(n,t){super(n,t,new $o,!1)}get parent(){let n=Ml(this._path);return n===null?null:new e(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}};function wd(e,n){return e=ze(e),e._checkNotDeleted("ref"),n!==void 0?Cd(e._root,n):e._root}function Cd(e,n){return e=ze(e),w(e._path)===null?nf("child","path",n,!1):md("child","path",n,!1),new xe(e._repo,L(e._path,n))}function Id(e,n){e=ze(e),rf("set",e._path),ef("set",n,e._path,!1);let t=new di;return mf(e._repo,e._path,n,null,t.wrapCallback(()=>{})),t.promise}zp(xe);Up(xe);var Cf="FIREBASE_DATABASE_EMULATOR_HOST",da={},If=!1;function xf(e,n,t,i){e.repoInfo_=new Mi(`${n}:${t}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function Sf(e,n,t,i,r){let o=i||e.options.databaseURL;o===void 0&&(e.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Q("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=dl(o,r),s=a.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Cf]),l?(c=!0,o=`http://${l}?ns=${s.namespace}`,a=dl(o,r),s=a.repoInfo):c=!a.repoInfo.secure;let d=r&&c?new $n($n.OWNER):new Ro(e.name,e.options,n);of("Invalid Firebase Database URL",a),C(a.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let u=Rf(s,e,d,new To(e.name,t));return new ua(u,e)}function Tf(e,n){let t=da[n];(!t||t[e.key]!==e)&&Gt(`Database ${n}(${e.repoInfo_}) has already been deleted.`),ff(e),delete t[e.key]}function Rf(e,n,t,i){let r=da[n.name];r||(r={},da[n.name]=r);let o=r[e.toURLString()];return o&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ca(e,If,t,i),r[e.toURLString()]=o,o}var ua=class{constructor(n,t){this._repoInternal=n,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(df(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xe(this._repo,S())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Tf(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&Gt("Cannot call "+n+" on a deleted database.")}};function xd(e=As(),n){let t=ks(e,"database").getImmediate({identifier:n});if(!t._instanceStarted){let i=gs("database");i&&Sd(t,...i)}return t}function Sd(e,n,t,i={}){e=ze(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Gt("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new $n($n.OWNER);else if(i.mockUserToken){let a=typeof i.mockUserToken=="string"?i.mockUserToken:_s(i.mockUserToken,e.app.options.projectId);o=new $n(a)}xf(r,n,t,o)}function Ef(e){hm(Ds),Es(new Ss("database",(n,{instanceIdentifier:t})=>{let i=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return Sf(i,r,o,t)},"PUBLIC").setMultipleInstances(!0)),bn(Pc,Mc,e),bn(Pc,Mc,"esm2017")}fa.prototype.simpleListen=function(e,n){this.sendRequest("q",{p:e},n)};fa.prototype.echo=function(e,n){this.sendRequest("echo",{d:e},n)};Ef();var Jn=class{constructor(n){return n}},Td="database",Ea=class{constructor(){return Ns(Td)}};var ka=new N("angularfire2.database-instances");function kf(e,n){let t=Ms(Td,e,n);return t&&new Jn(t)}function Df(e){return(n,t)=>{let i=n.runOutsideAngular(()=>e(t));return new Jn(i)}}var Af={provide:Ea,deps:[[new ke,ka]]},Pf={provide:Jn,useFactory:kf,deps:[[new ke,ka],Fs]};function x_(e,...n){return bn("angularfire",Ps.full,"rtdb"),ni([Pf,Af,{provide:ka,useFactory:Df(e),multi:!0,deps:[Z,ce,Ls,js,[new ke,Bs],[new ke,Os],...n]}])}var S_=mi(xd,!0);var T_=mi(wd,!0);var R_=mi(Id,!0);export{Jt as a,iu as b,ro as c,cb as d,lb as e,Ib as f,xb as g,Sb as h,Sc as i,em as j,xg as k,Sg as l,Jn as m,x_ as n,S_ as o,T_ as p,R_ as q};
