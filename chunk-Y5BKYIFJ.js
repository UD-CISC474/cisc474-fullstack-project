import{a as j}from"./chunk-725IIR4X.js";import{a as A,b as F,ba as T,ga as U,i as V}from"./chunk-YFSGSCRV.js";import{h as k,k as E,l as I,m as w}from"./chunk-JJ33YEFS.js";import{A as b,Eb as t,Fb as e,Wb as n,Xb as s,Yb as p,bb as i,cb as P,cc as y,g as O,ga as x,gc as g,hc as m,la as v,pa as S,sb as M,wb as _,yb as h,z as u}from"./chunk-WECLO23R.js";var f=class l{constructor(c){this.http=c}getUserStocks(c){let o="http://localhost:3000/api/user/stock",r=new A().set("userId",c);return this.http.get(o,{params:r})}static \u0275fac=function(o){return new(o||l)(v(F))};static \u0275prov=x({token:l,factory:l.\u0275fac,providedIn:"root"})};function $(l,c){if(l&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),g(7,"currency"),e(),t(8,"td"),n(9),g(10,"currency"),e(),t(11,"td"),n(12),g(13,"percent"),e()()),l&2){let o=c.$implicit;i(2),s(o.symbol),i(2),s(o.shares),i(2),s(m(7,9,o.price)),i(3),s(m(10,11,o.value)),i(2),h("positive",o.change>=0)("negative",o.change<0),i(),p(" ",m(13,13,o.change)," ")}}function B(l,c){if(l&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),e(),t(7,"td"),n(8),e(),t(9,"td"),n(10),e()()),l&2){let o=c.$implicit;i(2),s(o.stockSymbol),i(2),s(o.timestamp),i(2),s(o.shares),i(2),p("$",o.price," USD"),i(2),p("$",o.total," USD")}}var N=class l{constructor(c,o,r,d){this.auth=c;this.marketService=o;this.router=r;this.portfolioService=d;U(c,a=>{a?(this.userId=a.uid,console.log(`Authenticated user: ${this.userId}`),this.getPortfolioValue(),this.loadTransactions(this.userId)):(this.router.navigate(["/profile"]),console.log("No user authenticated. Using default-user."))})}userId="default-user";portfolioValue=0;transactions=[];availableCash=1e4;gainLoss=2e3;holdings=[{symbol:"AAPL",shares:10,price:150,value:1500,change:.02},{symbol:"TSLA",shares:5,price:700,value:3500,change:-.01},{symbol:"AMZN",shares:2,price:3200,value:6400,change:.03}];loadTransactions(c){return O(this,null,function*(){let o=yield b(this.portfolioService.getUserStocks(this.userId)),d=Object.values(o.stocks).map(a=>{let C=Number(a.price.toFixed(2)),z=Number((a.shares*a.price).toFixed(2));return{stockSymbol:a.stockSymbol,shares:a.shares,price:C,timestamp:a.timestamp.slice(0,10),total:z}});this.transactions=d.reverse()})}getPortfolioValue(){return O(this,null,function*(){console.log(this.userId);let o=(yield u(this.marketService.getUserStocks(this.userId))).stocks,r=Object.entries(o).map(([a,C])=>({id:a,stock:C})),d=0;r&&r.length>0&&r.map(({stock:a})=>{d+=a.price*a.shares}),this.portfolioValue=Number(d.toFixed(2)),console.log(this.portfolioValue)})}static \u0275fac=function(o){return new(o||l)(P(T),P(j),P(V),P(f))};static \u0275cmp=S({type:l,selectors:[["app-portfolio"]],standalone:!0,features:[y],decls:63,vars:13,consts:[[1,"portfolio-page"],[1,"page-header"],[1,"portfolio-summary"],[1,"summary-cards"],[1,"card"],[1,"portfolio-holdings"],[4,"ngFor","ngForOf"],[1,"recent-transactions"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"header",1)(2,"h1"),n(3,"Your Portfolio"),e(),t(4,"p"),n(5,"Track your investments and recent trades."),e()(),t(6,"section",2)(7,"h2"),n(8,"Portfolio Summary"),e(),t(9,"div",3)(10,"div",4)(11,"h3"),n(12,"Total Value"),e(),t(13,"p"),n(14),e()(),t(15,"div",4)(16,"h3"),n(17,"Available Cash"),e(),t(18,"p"),n(19),g(20,"currency"),e()(),t(21,"div",4)(22,"h3"),n(23,"Gain/Loss"),e(),t(24,"p"),n(25),g(26,"currency"),e()()()(),t(27,"section",5)(28,"h2"),n(29,"Holdings"),e(),t(30,"table")(31,"thead")(32,"tr")(33,"th"),n(34,"Stock"),e(),t(35,"th"),n(36,"Shares"),e(),t(37,"th"),n(38,"Price"),e(),t(39,"th"),n(40,"Value"),e(),t(41,"th"),n(42,"Change"),e()()(),t(43,"tbody"),M(44,$,14,15,"tr",6),e()()(),t(45,"section",7)(46,"h2"),n(47,"Recent Transactions"),e(),t(48,"table")(49,"thead")(50,"tr")(51,"th"),n(52,"Stock"),e(),t(53,"th"),n(54,"Date"),e(),t(55,"th"),n(56,"Shares"),e(),t(57,"th"),n(58,"Price"),e(),t(59,"th"),n(60,"Total"),e()()(),t(61,"tbody"),M(62,B,11,5,"tr",6),e()()()()),o&2&&(i(14),p("$",r.portfolioValue," USD"),i(5),s(m(20,9,r.availableCash)),i(5),h("positive",r.gainLoss>=0)("negative",r.gainLoss<0),i(),p(" ",m(26,11,r.gainLoss)," "),i(19),_("ngForOf",r.holdings),i(18),_("ngForOf",r.transactions))},dependencies:[w,k,E,I],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f8f9fa;margin:0;padding:0}.portfolio-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.portfolio-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.portfolio-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#007bff;margin:0}.portfolio-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#343a40;font-size:1.2rem}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]{margin-bottom:30px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#343a40;margin-bottom:20px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:flex;gap:20px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 2px 5px #0000001a;text-align:center}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#343a40;margin-bottom:10px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p.positive[_ngcontent-%COMP%]{color:#28a745}.portfolio-page[_ngcontent-%COMP%]   .portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p.negative[_ngcontent-%COMP%]{color:#dc3545}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]{margin-bottom:30px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#343a40;margin-bottom:20px}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background-color:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 5px #0000001a}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px;text-align:left;font-size:1rem}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n), .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover, .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#007bff1a}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:.9rem}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.positive[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.positive[_ngcontent-%COMP%]{color:#28a745}.portfolio-page[_ngcontent-%COMP%]   .portfolio-holdings[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.negative[_ngcontent-%COMP%], .portfolio-page[_ngcontent-%COMP%]   .recent-transactions[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td.negative[_ngcontent-%COMP%]{color:#dc3545}@media (max-width: 768px){.portfolio-summary[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{flex-direction:column}table[_ngcontent-%COMP%]{font-size:.8rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}}"]})};export{N as PortfolioComponent};
